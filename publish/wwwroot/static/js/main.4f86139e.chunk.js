(this["webpackJsonptaxcomputation-spa"]=this["webpackJsonptaxcomputation-spa"]||[]).push([[0],{151:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(25),c=a.n(o),s=(a(84),a(85),a(1)),l=(a(86),a(87),a(88),a(89),a(6)),i={startYear:1980,toastLifeTime:6e3,modes:["adding","mapping","view","summary"],modules:{dashboard:"Dashboard",fixedAsset:"Fixed Asset",profit_loss:"Profit & Loss",incomeTax:"Income Tax",deferredTax:"Deferred Tax",minimumTax:"Minimum Tax",itLevy:"I.T Levy",capitalAllowance:"Capital Allowance",investmentAllowance:"Investment Allowance",balancingAdjustment:"Balancing Adjustment"},routes:{home:"/",login:"/login",forgot_password:"/forgot_password",reset_password:"/reset_password",dashboard:"/dashboard",fixed_asset:"/fixed_asset",profit_loss:"/profit_loss",income_tax:"/income_tax",deferred_tax:"/deferred_tax",minimum_tax:"/minimum_tax",it_levy:"/it_levy",capital_allowance:"/capital_allowance",investment_allowance:"/investment_allowance",balancing_adjustment:"/balancing_adjustment"},nonMappedModules:["Minimum Tax","I.T Levy"],mappingCode:{fixedasset:"fixedasset",profitandloss:"profitandloss",balancingadjustment:"balancingadjustment",deferredtax:"deferredtax",incometax:"incometax"},networkErrorMessage:"Unable to reach server, check your network or contact your admin"},u=a(8),m=a(10),d=Object(m.d)({initialState:{companyId:null,companyName:"",companyDescription:"",cacNumber:"",tinNumber:""},actions:{initCompany:function(e){return function(t){return(0,t.setState)(e)}},onSelectCompany:function(e){var t=e.companyId,a=e.companyName,r=e.companyDescription,n=e.cacNumber,o=e.tinNumber;return function(e){return(0,e.setState)({companyId:t,companyName:a,companyDescription:r,cacNumber:n,tinNumber:o})}},resetCompany:function(){return function(e){return(0,e.setState)({companyId:null,companyName:"",companyDescription:"",cacNumber:"",tinNumber:""})}}},name:"company"}),p=Object(m.c)(d),f=a(2),h=a.n(f),v=a(3),b=a(18),y=a(13),g=a(4),E=a(17),w=function(e){var t=e.placeholder,a=e.autoComplete,r=e.value,o=e.onChange,c=n.a.useState(!1),l=Object(s.a)(c,2),i=l[0],u=l[1];return n.a.useEffect((function(){return u((function(e){return!!r&&e}))}),[r]),n.a.createElement("div",{style:{position:"relative"}},n.a.createElement(E.InputText,{style:{marginBottom:5,width:"100%",paddingRight:33},type:i?"text":"password",autoComplete:a,placeholder:t,value:r,onChange:o}),r&&n.a.createElement("i",{className:i?"pi pi-eye-slash":"pi pi-eye",style:{position:"absolute",left:"auto",right:10,top:12.5},onClick:function(){return u(!i)}}))},x=a(7),C=a.n(x),O=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,r=t.password,e.prev=1,e.next=4,C.a.post("/api/Authentication/login",{email:a,password:r});case 4:return n=e.sent,o=n.data,e.abrupt("return",o);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,e.prev=1,e.next=4,C.a.post("/api/Authentication/forgot-password/".concat(a));case 4:return r=e.sent,n=r.data,e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.token,r=t.newPassword,e.prev=1,e.next=4,C.a.post("/api/Authentication/reset-password",{token:a,newPassword:r,confirmPassword:r});case 4:return n=e.sent,o=n.data,e.abrupt("return",o);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.currentPassword,r=t.newPassword,e.prev=1,e.next=4,C.a.post("/api/Authentication/change-password",{currentPassword:a,newPassword:r,confirmPassword:r});case 4:return n=e.sent,o=n.data,e.abrupt("return",o);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),A=Object(m.d)({initialState:{isAuthenticated:null,userId:null,token:"",email:"",firstName:"",lastName:""},actions:{initAuth:function(e){return function(t){var a=t.setState,r=t.getState;a(e),null===r().isAuthenticated&&a({isAuthenticated:!1})}},onLoginSuccess:function(e){var t=e.id,a=e.token,r=e.email,n=e.firstName,o=e.lastName;return function(e){return(0,e.setState)({isAuthenticated:!0,userId:t,token:a,email:r,firstName:n,lastName:o})}},onLogout:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){var a=e.setState;t.forEach((function(e){return e instanceof Function?e():null})),a({isAuthenticated:!1,userId:null,token:"",email:"",firstName:"",lastName:""})}}},name:"auth"}),I=Object(m.c)(A),k=a(9),T=function(e){return new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(e)},B=function(e){return{severity:e.severity,summary:e.summary,detail:e.detail,life:i.toastLifeTime,closable:!1}},D=function(){return(new Date).getFullYear()},M=function(){for(var e=[],t=(new Date).getFullYear();t>=i.startYear;t--)e.push(t);return e},R=function(e){return i.nonMappedModules.includes(e)?"view":[i.modules.balancingAdjustment,i.modules.capitalAllowance].includes(e)?"adding":"mapping"},L=function(e,t){try{var a=JSON.stringify(e);sessionStorage.setItem(t,a)}catch(r){console.log(r)}},P=function(e){try{var t=sessionStorage.getItem(e);if(null===t)return;return sessionStorage.removeItem(e),JSON.parse(t)}catch(a){return}},q=T,F=B,Y=function(e,t){e.trialBalance&&t(e.trialBalance?e.trialBalance.filter((function(e){return!(""===e.accountId&&""===e.item&&0===e.debit&&0===e.credit)&&!e.item.toLowerCase().includes("total")})).map((function(e){return Object(k.a)(Object(k.a)({},e),{},{debitAmt:T(e.debit),creditAmt:T(e.credit)})})):[])},_=function(e,t){e.response.data.errors?t.show(B({severity:"error",detail:e.response.data.errors[0]})):t.show(B({severity:"error",summary:"Network Error",detail:i.networkErrorMessage}))},V=function(e){var t=e.setShowChangePassword,a=Object(l.i)(),r=Object(s.a)(a,1)[0],o=Object(g.b)(),c=o.errors,m=o.handleSubmit,d=o.control,f=I(),E=Object(s.a)(f,2)[1].onLogout,x=p(),C=Object(s.a)(x,2)[1].resetCompany,O=n.a.useState(!1),S=Object(s.a)(O,2),N=S[0],A=S[1],k=n.a.useRef();n.a.useEffect((function(){r.location.state&&k.current.show(F({severity:"success",detail:r.location.state}))}),[r]);var T=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,n,o,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N){e.next=2;break}return e.abrupt("return");case 2:if(a=t.currentPassword,n=t.newPassword,a!==n){e.next=6;break}return k.current.show(F({severity:"error",detail:"Current Password and New Password cannot be the same"})),e.abrupt("return");case 6:return A(!0),e.prev=7,e.next=10,j({currentPassword:a,newPassword:n});case 10:o=e.sent,c=o.message,r.location.state=c,E(C),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(7),A(!1),e.t0.response?(s=e.t0.response.data,k.current.show(F({severity:"error",summary:"Error",detail:s.message||s.errors.NewPassword[0]}))):k.current.show(F({severity:"error",summary:"Network Error",detail:i.networkErrorMessage}));case 20:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:"p-d-flex p-jc-center p-ai-center overlay"},n.a.createElement(b.Card,{style:{width:320}},n.a.createElement("form",{className:"p-d-flex p-flex-column",onSubmit:m(T)},n.a.createElement("div",{style:{marginBottom:15}},n.a.createElement(g.a,{name:"currentPassword",control:d,rules:{required:!0},defaultValue:"",render:function(e){return n.a.createElement(w,{placeholder:"Current Password",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}}),c.currentPassword&&n.a.createElement("span",{style:{fontSize:12,color:"red"}},"Current Password is required")),n.a.createElement("div",{style:{marginBottom:15}},n.a.createElement(g.a,{name:"newPassword",control:d,rules:{required:!0},defaultValue:"",render:function(e){return n.a.createElement(w,{placeholder:"New Password",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}}),c.newPassword&&n.a.createElement("span",{style:{fontSize:12,color:"red"}},"New Password is required")),n.a.createElement(u.Button,{type:"submit",label:N?null:"Change Password",icon:N?"pi pi-spin pi-spinner":null,style:{width:"100%"}})),!N&&n.a.createElement("p",{className:"back-to-app-link",onClick:function(){return t((function(e){return!e}))}},"Back to App")),n.a.createElement(y.Toast,{ref:function(e){return k.current=e}}))},z=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,r=t.password,n=t.confirmPassword,o=t.phoneNumber,c=t.firstName,s=t.lastName,e.prev=1,e.next=4,C.a.post("/api/Users/add-user",{email:a,password:r,confirmPassword:n,phoneNumber:o,firstName:c,lastName:s});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),U=function(e){var t=e.setShowCreateUser,a=Object(g.b)(),r=a.errors,o=a.handleSubmit,c=a.control,l=n.a.useState(!1),m=Object(s.a)(l,2),d=m[0],p=m[1],f=n.a.useRef(),x=function(){var e=Object(v.a)(h.a.mark((function e(a){var r,n,o,c,s,l,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=2;break}return e.abrupt("return");case 2:return r=a.email,n=a.password,o=a.firstName,c=a.lastName,s=a.phoneNumber,l=n,p(!0),e.prev=5,e.next=8,z({email:r,password:n,confirmPassword:l,firstName:o,lastName:c,phoneNumber:s});case 8:201===e.sent.status&&(f.current.show(F({severity:"success",detail:"User created successfully"})),setTimeout((function(){return t(!1)}),2e3)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),p(!1),e.t0.response?(u=e.t0.response.data,f.current.show(F({severity:"error",summary:u[0].code,detail:u[0].description}))):f.current.show(F({severity:"error",summary:"Network Error",detail:i.networkErrorMessage}));case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:"p-d-flex p-jc-center p-ai-center overlay"},n.a.createElement(b.Card,{style:{width:320}},n.a.createElement("form",{className:"p-d-flex p-flex-column",onSubmit:o(x)},n.a.createElement("div",{style:{marginBottom:15}},n.a.createElement(g.a,{name:"email",control:c,rules:{required:!0},defaultValue:"",render:function(e){return n.a.createElement(E.InputText,{style:{marginBottom:5,width:"100%",paddingRight:33},placeholder:"Email",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}}),r.email&&n.a.createElement("span",{style:{fontSize:12,color:"red"}},"Email is required")),n.a.createElement("div",{style:{marginBottom:15}},n.a.createElement(g.a,{name:"password",control:c,rules:{required:!0},defaultValue:"",render:function(e){return n.a.createElement(w,{placeholder:"Password",autoComplete:"new-password",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}}),r.password&&n.a.createElement("span",{style:{fontSize:12,color:"red"}},"Password is required")),n.a.createElement("div",{style:{marginBottom:15}},n.a.createElement(g.a,{name:"firstName",control:c,rules:{required:!0},defaultValue:"",render:function(e){return n.a.createElement(E.InputText,{style:{marginBottom:5,width:"100%",paddingRight:33},placeholder:"First Name",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}}),r.firstName&&n.a.createElement("span",{style:{fontSize:12,color:"red"}},"First Name is required")),n.a.createElement("div",{style:{marginBottom:15}},n.a.createElement(g.a,{name:"lastName",control:c,rules:{required:!0},defaultValue:"",render:function(e){return n.a.createElement(E.InputText,{style:{marginBottom:5,width:"100%",paddingRight:33},placeholder:"Last Name",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}}),r.lastName&&n.a.createElement("span",{style:{fontSize:12,color:"red"}},"Last Name is required")),n.a.createElement("div",{style:{marginBottom:15}},n.a.createElement(g.a,{name:"phoneNumber",control:c,rules:{required:!0},defaultValue:"",render:function(e){return n.a.createElement(E.InputText,{style:{marginBottom:5,width:"100%",paddingRight:33},placeholder:"Phone Number",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}}),r.phoneNumber&&n.a.createElement("span",{style:{fontSize:12,color:"red"}},"Phone Number is required")),n.a.createElement(u.Button,{type:"submit",label:d?null:"Create User",icon:d?"pi pi-spin pi-spinner":null,style:{width:"100%"}})),!d&&n.a.createElement("p",{className:"back-to-app-link",onClick:function(){return t((function(e){return!e}))}},"Back to App")),n.a.createElement(y.Toast,{ref:function(e){return f.current=e}}))},W={companies:null,fixedAssetModuleItems:null,profitAndLossModuleItems:null,trialBalance:null,assetList:null,selectedAsset:null},G=Object(m.d)({initialState:W,actions:{initResource:function(e){return function(t){return(0,t.setState)(e)}},onCompanies:function(e){return function(t){return(0,t.setState)({companies:e})}},onFixedAssetModuleItems:function(e){return function(t){return(0,t.setState)({fixedAssetModuleItems:e})}},onProfitAndLossModuleItems:function(e){return function(t){return(0,t.setState)({profitAndLossModuleItems:e})}},onTrialBalance:function(e){return function(t){return(0,t.setState)({trialBalance:e})}},onAssetList:function(e){return function(t){return(0,t.setState)({assetList:e})}},onSelectedAsset:function(e){return function(t){return(0,t.setState)({selectedAsset:e})}},resetResources:function(){return function(e){return(0,e.setState)(W)}}},name:"resources"}),X=Object(m.c)(G),H=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.moduleCode,e.prev=1,e.next=4,C.a.get("/api/Utilities/module-items/".concat(a));case 4:return r=e.sent,n=r.data,e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("/api/Utilities/asset-class/");case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.assetName,r=t.initial,n=t.annual,e.prev=1,e.next=4,C.a.post("/api/Utilities/asset-class",{assetName:a,initial:r,annual:n});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,r=t.assetName,n=t.initial,o=t.annual,e.prev=1,e.next=4,C.a.put("/api/Utilities/asset-class/".concat(a),{assetName:r,initial:n,annual:o});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.delete("/api/Utilities/asset-class/".concat(t));case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(e){var t=e.Controller,a=e.control,r=e.errors,o=e.controllerName,c=e.label,s=e.width,l=e.required,i=e.disabled,u=e.otherRules,m=e.placeholder,d=e.value,p=e.onChangeCallback,f=e.labelWidth,h=e.errorMessage,v=void 0===h?"":h,b=e.defaultValue,y=void 0===b?"":b,g=e.className,w=void 0===g?"p-d-flex p-flex-column":g,x=function(){return n.a.createElement(n.a.Fragment,null,r[o]&&n.a.createElement("span",{style:{fontSize:12,color:"red",marginLeft:f||0}},v))};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:w},c&&n.a.createElement("p",{style:{marginBottom:r[o]&&"p-d-flex p-flex-column"!==w?0:5,marginTop:0,width:f||"auto"}},c),n.a.createElement(t,{name:o,control:a,rules:Object(k.a)({required:l},u),defaultValue:y,render:function(e){return n.a.createElement(E.InputText,{disabled:i,style:{marginBottom:r[o]&&"p-d-flex p-flex-column"!==w?0:5,width:s||200},value:d||e.value,placeholder:m,onChange:function(t){e.onChange(t.target.value),p&&p(t.target.value)}})}}),"p-d-flex p-flex-column"===w&&n.a.createElement(x,null)),"p-d-flex p-flex-column"!==w&&n.a.createElement(x,null))},ee=function(e){var t=e.setShowCreateAsset,a=e.setShowAssetList,r=Object(g.b)(),o=r.errors,c=r.handleSubmit,l=r.control,m=X(),d=Object(s.a)(m,2),p=d[0].selectedAsset,f=d[1].onAssetList,E=n.a.useState(!1),w=Object(s.a)(E,2),x=w[0],C=w[1],O=n.a.useRef(),S=function(){var e=Object(v.a)(h.a.mark((function e(r){var n,o,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=2;break}return e.abrupt("return");case 2:if(n=r.assetName,o=r.initial,c=r.annual,C(!0),e.prev=4,!p){e.next=11;break}return e.next=8,K({id:p.id,assetName:n,initial:o,annual:c});case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,J({assetName:n,initial:o||0,annual:c||0});case 13:e.t0=e.sent;case 14:200===e.t0.status&&(O.current.show(F({severity:"success",detail:p?"Asset updated successfully":"Asset created successfully"})),setTimeout((function(){f(null),t(!1),a(!0)}),2e3)),e.next=22;break;case 18:e.prev=18,e.t1=e.catch(4),C(!1),e.t1.response?e.t1.response.data.errors.error.forEach((function(e){O.current.show(F({severity:"error",detail:e}))})):O.current.show(F({severity:"error",summary:"Network Error",detail:i.networkErrorMessage}));case 22:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:"p-d-flex p-jc-center p-ai-center overlay"},n.a.createElement(b.Card,{style:{width:320}},n.a.createElement("form",{className:"p-d-flex p-flex-column",onSubmit:c(S)},n.a.createElement("div",{style:{marginBottom:15}},n.a.createElement(Q,{Controller:g.a,control:l,errors:o,controllerName:"assetName",label:"Asset Name",defaultValue:p?p.assetName:"",required:!0,width:"100%",errorMessage:"Asset Name is required"})),n.a.createElement("div",{style:{marginBottom:15}},n.a.createElement(Q,{Controller:g.a,control:l,errors:o,controllerName:"initial",label:"Initial",defaultValue:p?p.initial:"",otherRules:{pattern:/^\d*(\.\d+)?$/},width:"100%",errorMessage:"Initial must contain only numbers"})),n.a.createElement("div",{style:{marginBottom:15}},n.a.createElement(Q,{Controller:g.a,control:l,errors:o,controllerName:"annual",label:"Annual",defaultValue:p?p.annual:"",otherRules:{pattern:/^\d*(\.\d+)?$/},width:"100%",errorMessage:"Annual must contain only numbers"})),n.a.createElement(u.Button,{type:"submit",label:x?null:p?"Update Asset":"Create Asset",icon:x?"pi pi-spin pi-spinner":null,style:{width:"100%"}})),!x&&n.a.createElement("p",{className:"back-to-app-link",onClick:function(){t(!1),a(!0)}},"Back to Asset List")),n.a.createElement(y.Toast,{ref:function(e){return O.current=e}}))},te=a(40),ae=function(e){var t=e.assetData,a=e.onAssetList,r=e.setShowAssetList,o=e.setShowCreateAsset,c=e.onSelectedAsset,l=n.a.useState(!1),i=Object(s.a)(l,2),u=i[0],m=i[1];return n.a.createElement("div",{className:"p-d-flex p-jc-between p-ai-center"},n.a.createElement("p",{style:{marginTop:10,marginBottom:10}},t.assetName),n.a.createElement("div",null,n.a.createElement("i",{className:"pi pi-pencil edit",onClick:function(){c(t),r(!1),o(!0)}}),n.a.createElement("i",{className:u?"pi pi-spin pi-spinner":"pi pi-trash delete",style:{marginLeft:20,marginRight:10},onClick:Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,$(t.id);case 4:200===e.sent.status&&a(null),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Failed to delete asset");case 11:return e.prev=11,m(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))})))},re=function(){return n.a.createElement("div",{className:"p-d-flex p-flex-column p-jc-center p-ai-center",style:{width:"100%"}},n.a.createElement("i",{className:"pi pi-spin pi-spinner",style:{fontSize:24}}))},ne=function(e){var t=e.showAssetList,a=e.setShowAssetList,r=e.setShowCreateAsset,o=n.a.useState(!1),c=Object(s.a)(o,2),l=c[0],i=c[1],m=n.a.useState(null),d=Object(s.a)(m,2),p=d[0],f=d[1],b=X(),y=Object(s.a)(b,2),g=y[0].assetList,E=y[1],w=E.onAssetList,x=E.onSelectedAsset;return n.a.useEffect((function(){(function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=16;break}return e.prev=1,i(!0),f(null),e.next=6,Z();case 6:200===(t=e.sent).status&&w(t.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),f("Failed to get all assets");case 13:return e.prev=13,i(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}})()()}),[g,w]),n.a.createElement(te.Dialog,{header:"Asset List",footer:n.a.createElement("div",null,n.a.createElement(u.Button,{label:"Add Asset",onClick:function(){x(null),r(!0),a(!1)}})),visible:t,style:{width:500},blockScroll:!0,focusOnShow:!1,closeOnEscape:!0,closable:!0,onHide:function(){return a(!1)}},n.a.createElement("div",{className:"p-d-flex p-flex-column",style:{height:300}},l&&n.a.createElement("div",{className:"p-d-flex p-jc-center p-ai-center",style:{height:"100%",width:"100%"}},n.a.createElement(re,null)),p&&n.a.createElement("div",{className:"p-d-flex p-flex-column p-jc-center p-ai-center",style:{height:"100%",width:"100%"}},n.a.createElement("p",{style:{marginTop:10,marginBottom:10,marginRight:10}},p),n.a.createElement(u.Button,{className:"p-button-outlined",label:"Retry",onClick:function(){return w(null)}})),g&&g.map((function(e){return n.a.createElement(ae,{key:e.id,assetData:e,onAssetList:w,setShowAssetList:a,setShowCreateAsset:r,onSelectedAsset:x})}))))},oe=function(e){var t=e.title,a=e.loading,r=Object(l.j)().replace,o=n.a.useState(),c=Object(s.a)(o,2),m=c[0],d=c[1],f=n.a.useState(),h=Object(s.a)(f,2),v=h[0],b=h[1],y=n.a.useState(),g=Object(s.a)(y,2),E=g[0],w=g[1],x=n.a.useState(),C=Object(s.a)(x,2),O=C[0],S=C[1],N=n.a.useState(),j=Object(s.a)(N,2),A=j[0],I=j[1],k=p(),T=Object(s.a)(k,2),B=T[0].companyName,D=T[1].resetCompany,M=X(),R=Object(s.a)(M,2)[1].resetResources;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-d-flex p-jc-between p-ai-center drop-shadow",style:{background:"#fff",width:"calc(100% - 256px)",height:66,padding:"0px 20px",position:"fixed",borderLeft:"2px solid #f5f6f8",zIndex:1}},n.a.createElement("p",{style:{marginTop:5,marginBottom:0,fontSize:18,fontWeight:600}},t),!a&&n.a.createElement("div",{className:"p-d-flex p-ai-center"},n.a.createElement("p",{style:{marginRight:10}},B),n.a.createElement("div",{style:{position:"relative"}},n.a.createElement(u.Button,{icon:"pi pi-cog pi-20",className:"p-button-text",onClick:function(){return d(!m)}}),m&&n.a.createElement("div",{className:"drop-shadow",style:{position:"absolute",right:0,width:170,padding:5,background:"#fff"}},n.a.createElement("p",{className:"settings-item",onClick:function(){I(!A),d(!1)}},"Asset List"),n.a.createElement("p",{className:"settings-item",onClick:function(){w(!E),d(!1)}},"Create User"),n.a.createElement("p",{className:"settings-item",onClick:function(){d(!1),D(),R(),r(i.routes.home)}},"Switch Company"),n.a.createElement("p",{className:"settings-item",onClick:function(){b(!v),d(!1)}},"Change Password"))))),v&&n.a.createElement(V,{setShowChangePassword:b}),E&&n.a.createElement(U,{setShowCreateUser:w}),O&&n.a.createElement(ee,{setShowCreateAsset:S,setShowAssetList:I}),A&&n.a.createElement(ne,{showAssetList:A,setShowAssetList:I,setShowCreateAsset:S}))},ce=function(e){var t=e.selectedTitle,a=I(),r=Object(s.a)(a,2),o=r[0],c=o.firstName,u=o.lastName,m=o.email,d=r[1].onLogout,f=p(),h=Object(s.a)(f,2),v=h[0].companyId,b=h[1].resetCompany,y=[{title:"Dashboard",href:i.routes.dashboard},{title:i.modules.fixedAsset,href:"".concat(i.routes.fixed_asset,"/").concat(R(i.modules.fixedAsset))},{title:i.modules.profit_loss,href:"".concat(i.routes.profit_loss,"/").concat(R(i.modules.profit_loss))},{title:i.modules.incomeTax,href:"".concat(i.routes.income_tax,"/").concat(R(i.modules.incomeTax))},{title:i.modules.deferredTax,href:"".concat(i.routes.deferred_tax,"/").concat(R(i.modules.deferredTax))},{title:i.modules.minimumTax,href:"".concat(i.routes.minimum_tax,"/").concat(R(i.modules.minimumTax))},{title:i.modules.itLevy,href:"".concat(i.routes.it_levy,"/").concat(R(i.modules.itLevy))},{title:i.modules.capitalAllowance,href:"".concat(i.routes.capital_allowance,"/").concat(R(i.modules.capitalAllowance))},{title:i.modules.investmentAllowance,href:"".concat(i.routes.investment_allowance,"/").concat(R(i.modules.investmentAllowance))},{title:i.modules.balancingAdjustment,href:"".concat(i.routes.balancing_adjustment,"/").concat(R(i.modules.balancingAdjustment))}];return n.a.createElement("div",{className:"p-d-flex",style:{position:"fixed",zIndex:1}},n.a.createElement("div",{className:"p-d-flex p-flex-column",style:{width:256,height:"100vh",background:"#fff"}},n.a.createElement("h2",{className:"accent-color",style:{margin:"5px 0",padding:"10px 20px"}},"Tax Computation"),n.a.createElement("div",{className:"divider"}),n.a.createElement("div",{style:{padding:"10px 20px"}},n.a.createElement("div",{style:{marginTop:10,background:"#f5f6f8",padding:10}},n.a.createElement("h4",{style:{marginTop:5,marginBottom:0}},c," ",u),n.a.createElement("p",{style:{fontSize:12,margin:0}},m))),y.map((function(e,a){return n.a.createElement(l.a,{key:a,href:v?e.href:null,className:"sidebar-link",style:{padding:"5px 20px"}},n.a.createElement("p",{className:t.toLowerCase()===e.title.toLowerCase()?"accent-color":"",style:{marginTop:5,marginBottom:0}},e.title))})),n.a.createElement("div",{className:"divider",style:{margin:"10px 0px"}}),n.a.createElement("div",{className:"sidebar-link",style:{padding:"0px 20px"}},n.a.createElement("p",{style:{margin:0,cursor:"pointer"},onClick:function(){d(b)}},"Logout"))))},se=function(e){var t=e.title,a=e.loading,r=e.children;return n.a.createElement("div",{className:"p-d-flex"},n.a.createElement(ce,{selectedTitle:t}),n.a.createElement("div",{className:"p-d-flex p-flex-column",style:{width:"100%",marginLeft:256}},n.a.createElement(oe,{title:t,loading:a}),n.a.createElement("div",{style:{padding:20,marginTop:66}},r)))},le=function(e){var t=e.headers;return n.a.createElement(n.a.Fragment,null,t.map((function(e,t){return n.a.createElement("p",{key:t,className:"view-description"},e)})))},ie=function(e){var t=e.title,a=e.year,r=e.children,o=p(),c=Object(s.a)(o,1)[0].companyName;return n.a.createElement(n.a.Fragment,null,n.a.createElement(le,{headers:[c.toUpperCase(),"".concat(a," INCOME TAX COMPUTATIONS"),"AUDITED ACCOUNTS FOR THE YEAR ENDED 31 DECEMBER, ".concat(a-1),{"Fixed Asset":"ANALYSIS OF FIXED ASSET MOVEMENT","Profit & Loss":"SUMMARY OF PROFIT & LOSS ACCOUNTS","Income Tax":"INCOME TAX COMPUTATION","Deferred Tax":"DEFERRED TAX COMPUTATION","Minimum Tax":"MINIMUM TAX COMPUTATION","I.T Levy":"I.T. LEVY COMPUTATION (BASED ON THE 2007 CITA AMENDMENT)","Investment Allowance":"COMPUTATION OF INVESTMENT ALLOWANCE","Balancing Allowance":"COMPUTATION OF BALANCING ALLOWANCE/CHARGE"}[t]]}),r)},ue=a(14),me=a(5),de=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o,c,s,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.year,r=t.assetId,n=t.cost,o=t.salesProceed,c=t.yearBought,s=t.companyId,e.prev=1,(l=new FormData).append("Year",a),l.append("AssetId",r),l.append("Cost",n),l.append("SalesProceed",o),l.append("YearBought",c),l.append("CompanyId",s),e.next=11,C.a.post("/api/BalancingAdjustment",l,{headers:{"Content-Type":"multipart/form-data"}});case 11:return e.abrupt("return",e.sent);case 14:throw e.prev=14,e.t0=e.catch(1),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.companyId,r=t.year,e.prev=1,e.next=4,C.a.get("/api/BalancingAdjustment?companyId=".concat(a,"&year=").concat(r));case 4:return n=e.sent,o=n.data,e.abrupt("return",o);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.delete("/api/BalancingAdjustment/".concat(t));case 3:return a=e.sent,r=a.data,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),he=function(e){var t=e.year,a=e.toast,r=n.a.useRef(!1),o=p(),c=Object(s.a)(o,1)[0].companyId,l=n.a.useState(),i=Object(s.a)(l,2),u=i[0],m=i[1],d=n.a.useState(),f=Object(s.a)(d,2),b=f[0],y=f[1],g=n.a.useState([]),E=Object(s.a)(g,2),w=E[0],x=E[1];return n.a.useEffect((function(){if(c){r.current=!0;var e=function(){var o=Object(v.a)(h.a.mark((function o(){var s;return h.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,y(null),m(!0),o.next=5,pe({companyId:c,year:t});case 5:s=o.sent,r.current&&x((function(){var r=[];return s.values.balancingAdjustments.forEach((function(o,c){var l={},i={};l.category=n.a.createElement("strong",null,o.assetName),r.push(l),o.assetYear.forEach((function(c,s){var l={},u={},m={},d={},p={},f={};l.category=n.a.createElement("div",{className:"p-d-flex p-jc-between p-ai-center"},n.a.createElement("p",null,"Cost up to ".concat(c.yearBought," YOA")),n.a.createElement("i",{className:"pi pi-times-circle delete",style:{fontSize:14,marginTop:2},onClick:Object(v.a)(h.a.mark((function t(){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fe(c.id);case 3:(r=t.sent)&&(a.show(F({severity:"success",detail:r.responseDescription})),e()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))})),l.credit=q(c.cost),l.cost=q(c.cost),u.category="Initial Allowance",u.credit=q(c.initialAllowance),m.category="Annual allowances up to ".concat(t-1),m.credit=q(c.annualAllowance),d.category="Residue at 31.12.".concat(t-1),d.credit=q(c.residue),d.twdv=q(c.residue),p.category="Sales Proceeds",p.credit=q(c.salesProceed),p.salesProceed=q(c.salesProceed),c.balancingCharge>0?(f.category="Balancing Charge",f.credit=q(c.balancingCharge),f.balancingCharge=q(c.balancingCharge)):(f.category="Balancing Allowance",f.credit=q(c.balancingAllowance),f.balancingCharge=q(c.balancingAllowance)),r.push(l),r.push(u),r.push(m),r.push(d),r.push(p),r.push(f),s<o.assetYear.length-1&&r.push(i)})),c<s.values.balancingAdjustments.length-1&&r.push(i)})),r})),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(0),r.current&&(o.t0.response?y(o.t0.response.data.errors[0]):y(o.t0.message));case 12:return o.prev=12,r.current&&m(!1),o.finish(12);case 15:case"end":return o.stop()}}),o,null,[[0,9,12,15]])})));return function(){return o.apply(this,arguments)}}();return e(),function(){return r.current=!1}}}),[c,a,t]),b?n.a.createElement("p",{style:{color:"#f00"}},b):u?n.a.createElement(re,null):0===(null===w||void 0===w?void 0:w.length)||void 0===w?n.a.createElement("p",{style:{color:"#f00"}},"Currently, no data for the selected year for this company"):n.a.createElement(ue.DataTable,{className:"p-datatable-gridlines",value:w,style:{marginTop:40}},n.a.createElement(me.Column,{field:"category",header:""}),n.a.createElement(me.Column,{field:"credit",header:""}),n.a.createElement(me.Column,{field:"balancingAllowance",header:"Balancing Allowance"}),n.a.createElement(me.Column,{field:"balancingCharge",header:"Balancing Charge"}),n.a.createElement(me.Column,{field:"cost",header:"Cost"}),n.a.createElement(me.Column,{field:"salesProceed",header:"Sales Proceed"}),n.a.createElement(me.Column,{field:"twdv",header:"TWDV"}))},ve=a(22),be=function(e){var t=e.title,a=e.mode,r=e.setMode,o=e.year,c=e.setYear,l=e.assetId,u=e.setAssetId,m=e.yearSelectItems,d=e.assetClassSelectItems,p=n.a.useState([i.modules.balancingAdjustment,i.modules.capitalAllowance]),f=Object(s.a)(p,1)[0],h=n.a.useState([i.modules.capitalAllowance]),v=Object(s.a)(h,1)[0],b=n.a.useState([f.includes(t)?{label:"Adding - Mode",value:"adding"}:{label:"Mapping - Mode",value:"mapping"},{label:"View - Mode",value:"view"}]),y=Object(s.a)(b,2),g=y[0],E=y[1];return n.a.useEffect((function(){E((function(e){return v.includes(t)?e.concat([{label:"Summary - Mode",value:"summary"}]):e}))}),[v,t]),n.a.createElement("div",{className:"p-d-flex p-jc-center p-flex-column",style:{width:"100%"}},n.a.createElement("div",{className:"p-d-flex p-ai-center p-jc-between",style:{padding:"0px 20px"}},n.a.createElement("p",{style:{fontSize:18,fontWeight:600}},t,{adding:" - Adding",mapping:" - Mapping",view:" - View",summary:" - Summary"}[a]),n.a.createElement("div",null,"view"===a?t!==i.modules.capitalAllowance?n.a.createElement(ve.Dropdown,{style:{width:180,marginRight:20},placeholder:"Select year",value:o,options:m,onChange:function(e){c(e.value)}}):n.a.createElement(n.a.Fragment,null,l&&n.a.createElement(ve.Dropdown,{style:{width:180,marginRight:20},placeholder:"Select asset",value:l,options:d,onChange:function(e){u(e.value)}})):null,n.a.createElement(ve.Dropdown,{style:{width:180},value:a,disabled:i.nonMappedModules.includes(t),options:g,onChange:function(e){r(e.value)}}))),n.a.createElement("div",{className:"divider"}))},ye=function(e){var t=e.title,a=e.mode,r=e.setMode,o=e.year,c=e.setYear,s=e.yearSelectItems,l=e.assetId,u=e.setAssetId,m=e.assetClassSelectItems,d=e.children;return i.modes.includes(a)||r(R(t)),n.a.createElement(b.Card,{header:n.a.createElement(be,{title:t,mode:a,setMode:r,year:o,setYear:c,assetId:l,setAssetId:u,yearSelectItems:s,assetClassSelectItems:m}),style:{width:"100%",overflowX:"auto"}},d)},ge=function(e){var t=e.Controller,a=e.control,r=e.errors,o=e.controllerName,c=e.label,s=e.width,l=e.required,i=e.otherRules,u=e.dropdownOptions,m=e.placeholder,d=e.onChangeCallback,p=e.labelWidth,f=e.errorMessage,h=void 0===f?"":f,v=e.defaultValue,b=void 0===v?"":v,y=e.className,g=void 0===y?"p-d-flex p-flex-column":y,E=function(){return n.a.createElement(n.a.Fragment,null,r[o]&&n.a.createElement("span",{style:{fontSize:12,color:"red",marginLeft:p||0}},h))};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:g},c&&n.a.createElement("p",{style:{marginBottom:r[o]&&"p-d-flex p-flex-column"!==g?0:5,marginTop:0,width:p||"auto"}},c),n.a.createElement(t,{name:o,control:a,rules:Object(k.a)({required:l},i),defaultValue:b,render:function(e){return n.a.createElement(ve.Dropdown,{style:{marginBottom:r[o]&&"p-d-flex p-flex-column"!==g?0:5,width:s||200},value:e.value,options:u,placeholder:m,onChange:function(t){e.onChange(t.target.value),d&&d(t.target.value)}})}}),"p-d-flex p-flex-column"===g&&n.a.createElement(E,null)),"p-d-flex p-flex-column"!==g&&n.a.createElement(E,null))},Ee=function(e){var t=e.yearSelectItems,a=e.assetClassSelectItems,r=e.toast,o=Object(g.b)(),c=o.errors,l=o.handleSubmit,i=o.control,m=p(),d=Object(s.a)(m,1)[0].companyId,f=n.a.useState(!1),b=Object(s.a)(f,2),y=b[0],E=b[1],w=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,n,o,c,s,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return");case 2:return a=t.year,n=t.assetId,o=t.cost,c=t.salesProceed,s=t.yearBought,E(!0),e.prev=4,e.next=7,de({year:a,assetId:n,cost:o,salesProceed:c,yearBought:s,companyId:d});case 7:200===(l=e.sent).status&&r.show(F({severity:"success",detail:l.data.responseDescription})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),_(e.t0,r);case 14:return e.prev=14,E(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[4,11,14,17]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("form",{className:"p-d-flex p-flex-column p-jc-between",onSubmit:l(w)},n.a.createElement("div",{style:{marginBottom:10}},n.a.createElement(ge,{Controller:g.a,control:i,errors:c,controllerName:"year",label:"Year",required:!0,dropdownOptions:t,errorMessage:"Year is required",labelWidth:120,className:"p-d-flex p-ai-center"})),n.a.createElement("div",{style:{marginBottom:10}},n.a.createElement(ge,{Controller:g.a,control:i,errors:c,controllerName:"assetId",label:"Asset",required:!0,dropdownOptions:a,errorMessage:"Asset is required",labelWidth:120,className:"p-d-flex p-ai-center"})),n.a.createElement("div",{style:{marginBottom:10}},n.a.createElement(Q,{Controller:g.a,control:i,errors:c,controllerName:"cost",label:"Cost",required:!0,errorMessage:"Cost is required",labelWidth:120,className:"p-d-flex p-ai-center"})),n.a.createElement("div",{style:{marginBottom:10}},n.a.createElement(Q,{Controller:g.a,control:i,errors:c,controllerName:"salesProceed",label:"Sales Proceed",required:!0,errorMessage:"Sales Proceed is required",labelWidth:120,className:"p-d-flex p-ai-center"})),n.a.createElement("div",{style:{marginBottom:10}},n.a.createElement(ge,{Controller:g.a,control:i,errors:c,controllerName:"yearBought",label:"Year Bought",required:!0,dropdownOptions:t,errorMessage:"Year Bought is required",labelWidth:120,className:"p-d-flex p-ai-center"})),n.a.createElement("div",{className:"p-d-flex p-flex-column",style:{marginTop:10}},n.a.createElement(u.Button,{type:"submit",label:y?null:"Submit",icon:y?"pi pi-spin pi-spinner":null,style:{width:320}})))},we=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.companyName,r=t.companyDescription,n=t.cacNumber,o=t.tinNumber,c=t.openingYear,s=t.closingYear,e.prev=1,e.next=4,C.a.post("/api/Companies/add-company",{companyName:a,companyDescription:r,cacNumber:n,tinNumber:o,openingYear:c,closingYear:s});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Object(v.a)(h.a.mark((function e(){var t,a,r,n,o=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:1,a=o.length>1&&void 0!==o[1]?o[1]:1e3,e.prev=2,e.next=5,C.a.get("/api/Companies/get-companies".concat(t&&a?"?PageNumber=".concat(t,"&PageSIze=").concat(a):""));case 5:return r=e.sent,n=r.data,e.abrupt("return",n);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.file,r=t.companyId,n=t.year,e.prev=1,(o=new FormData).append("File",a.item(0)),o.append("CompanyId",r),o.append("YearId",n),e.next=8,C.a.post("/api/TrialBalance",o,{headers:{"Content-Type":"multipart/form-data"}});case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(1),e.t0;case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.companyId,r=t.year,e.prev=1,e.next=4,C.a.get("/api/TrialBalance?companyId=".concat(a,"&yearId=").concat(r));case 4:return n=e.sent,o=n.data,e.abrupt("return",o);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),Se=Object(l.f)({type:"COMPANIES",getKey:function(){return"companies"},getData:function(){return xe()}}),Ne=Object(l.f)({type:"FIXED_ASSET_MODULE_CLASS",getKey:function(){return"fixedAssetModuleClass"},getData:function(){return H({moduleCode:"fixedasset"})}}),je=Object(l.f)({type:"PROFIT_AND_LOSS_MODULE_CLASS",getKey:function(){return"profitandlossModuleClass"},getData:function(){return H({moduleCode:"profitandloss"})}}),Ae=Object(l.f)({type:"TRIAL_BALANCE",getKey:function(){return"trialBalance"},getData:function(){return Oe({companyId:sessionStorage.getItem("cid"),year:D()})}}),Ie=function(e){var t=e.title;return n.a.createElement(se,{title:t,loading:!0},n.a.createElement("div",{className:"p-d-flex p-flex-column p-jc-center p-ai-center",style:{height:"calc(100vh - 120px)"}},n.a.createElement("i",{className:"pi pi-spin pi-spinner",style:{fontSize:24}}),n.a.createElement("p",null,"Loading data...")))},ke=function(e){var t=e.title,a=e.error,r=e.refresh;return n.a.createElement(se,{title:t},n.a.createElement("div",{className:"p-d-flex p-flex-column p-jc-center p-ai-center",style:{height:"calc(100vh - 120px)"}},n.a.createElement(u.Button,{icon:"pi pi-refresh pi-24",className:"p-button-rounded p-button-text",onClick:r}),n.a.createElement("div",{style:{width:400,textAlign:"center"}},a.response?a.response.data.errors.error.map((function(e){return n.a.createElement("p",null,e)})):"Network Error"===a.message?n.a.createElement("p",null,i.networkErrorMessage):n.a.createElement("p",null,a.message))))},Te=function(){var e=i.modules.balancingAdjustment,t=n.a.useRef(),a=Object(l.h)(Ne),r=a.data,o=a.error,c=a.refresh,u=Object(l.g)("mode"),m=Object(s.a)(u,2),d=m[0],p=m[1],f=X(),h=Object(s.a)(f,2),v=h[0],b=h[1].onFixedAssetModuleItems,g=n.a.useState([]),E=Object(s.a)(g,2),w=E[0],x=E[1],C=n.a.useState(D()),O=Object(s.a)(C,2),S=O[0],N=O[1],j=M((function(e){return{label:e.toString(),value:e.toString()}}));return n.a.useEffect((function(){r&&b(r)}),[r,b]),n.a.useEffect((function(){v.fixedAssetModuleItems&&x(v.fixedAssetModuleItems.map((function(e){var t=e.id;return{label:e.name,value:t}})))}),[v.fixedAssetModuleItems]),o?n.a.createElement(ke,{title:e,error:o,refresh:c}):v.fixedAssetModuleItems?n.a.createElement(se,{title:e},n.a.createElement(ye,{title:e,mode:d,setMode:p,year:S,setYear:N,yearSelectItems:j},{adding:n.a.createElement(Ee,{yearSelectItems:j,assetClassSelectItems:w,toast:t.current}),view:n.a.createElement(ie,{title:e,year:S},n.a.createElement(he,{year:S,toast:t.current}))}[d]),n.a.createElement(y.Toast,{baseZIndex:1e3,ref:function(e){return t.current=e}})):n.a.createElement(Ie,{title:e})},Be=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o,c,s,l,i,u,m,d,p;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.companyId,r=t.taxYear,n=t.assetId,o=t.openingResidue,c=t.addition,s=t.disposal,l=t.initial,i=t.annual,u=t.total,m=t.closingResidue,d=t.yearsToGo,p=t.numberOfYearsAvailable,e.prev=1,e.next=4,C.a.post("/api/CapitalAllowance",{companyId:a,taxYear:r,assetId:n,openingResidue:o,addition:c,disposal:s,initial:l,annual:i,total:u,closingResidue:m,yearsToGo:d,numberOfYearsAvailable:p});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.companyId,r=t.assetId,e.prev=1,e.next=4,C.a.get("/api/CapitalAllowance/".concat(a,"/").concat(r));case 4:return n=e.sent,o=n.data,e.abrupt("return",o);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.companyId,e.prev=1,e.next=4,C.a.get("/api/CapitalAllowanceSummary/companyId?companyId=".concat(a));case 4:return r=e.sent,n=r.data,e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.delete("/api/CapitalAllowance/".concat(t));case 3:return a=e.sent,r=a.data,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Le=function(e){var t=e.assetId,a=e.toast,r=n.a.useRef(!1),o=p(),c=Object(s.a)(o,1)[0].companyId,l=n.a.useState(),i=Object(s.a)(l,2),u=i[0],m=i[1],d=n.a.useState(),f=Object(s.a)(d,2),b=f[0],y=f[1],g=n.a.useState([]),E=Object(s.a)(g,2),w=E[0],x=E[1];return n.a.useEffect((function(){if(c){r.current=!0;var e=function(){var o=Object(v.a)(h.a.mark((function o(){var s,l,i,u,d,p,f,b,g;return h.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t){o.next=2;break}return o.abrupt("return");case 2:return o.prev=2,y(null),m(!0),o.next=7,De({companyId:c,assetId:t});case 7:s=o.sent,l=s.capitalAllowances,i=s.openingResidualTotal,u=s.additionTotal,d=s.disposalTotal,p=s.initialTotal,f=s.annualTotal,b=s.totalTotal,g=s.closingResidueTotal,r.current&&x((function(){return null===l||void 0===l?void 0:l.map((function(t){return Object(k.a)(Object(k.a)({},t),{},{taxYear:n.a.createElement("div",{className:"p-d-flex p-jc-between p-ai-center"},n.a.createElement("strong",null,t.taxYear),n.a.createElement("i",{className:"pi pi-times-circle delete",style:{fontSize:14,marginTop:2},onClick:Object(v.a)(h.a.mark((function r(){var n;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Re(t.id);case 3:(n=r.sent)&&(a.show(F({severity:"success",detail:n})),e()),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.log(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))}))})})).concat([{},{openingResidue:n.a.createElement("strong",null,q(i)),addition:n.a.createElement("strong",null,q(u)),disposal:n.a.createElement("strong",null,q(d)),initial:n.a.createElement("strong",null,q(p)),annual:n.a.createElement("strong",null,q(f)),total:n.a.createElement("strong",null,q(b)),closingResidue:n.a.createElement("strong",null,q(g))}])})),o.next=22;break;case 19:o.prev=19,o.t0=o.catch(2),r.current&&(o.t0.response?y(o.t0.response.data.errors[0]):y(o.t0.message));case 22:return o.prev=22,r.current&&m(!1),o.finish(22);case 25:case"end":return o.stop()}}),o,null,[[2,19,22,25]])})));return function(){return o.apply(this,arguments)}}();return e(),function(){return r.current=!1}}}),[c,t,a]),b?n.a.createElement("p",{style:{color:"#f00"}},b):u?n.a.createElement(re,null):0===(null===w||void 0===w?void 0:w.length)||void 0===w?n.a.createElement("p",{style:{color:"#f00"}},"Currently, no data for the selected year for this company"):n.a.createElement(ue.DataTable,{className:"p-datatable-gridlines",value:w,style:{marginTop:40,width:1200},scrollable:!0},n.a.createElement(me.Column,{field:"taxYear",header:"Tax Year",headerStyle:{width:"6em"}}),n.a.createElement(me.Column,{field:"numberOfYearsAvailable",header:"Year(s) Available",headerStyle:{width:"6em"}}),n.a.createElement(me.Column,{field:"openingResidue",header:"Opening Residue",headerStyle:{width:"10em"}}),n.a.createElement(me.Column,{field:"addition",header:"Addition",headerStyle:{width:"10em"}}),n.a.createElement(me.Column,{field:"disposal",header:"Disposal",headerStyle:{width:"10em"}}),n.a.createElement(me.Column,{field:"initial",header:"Initial",headerStyle:{width:"10em"}}),n.a.createElement(me.Column,{field:"annual",header:"Annual",headerStyle:{width:"10em"}}),n.a.createElement(me.Column,{field:"total",header:"Total",headerStyle:{width:"10em"}}),n.a.createElement(me.Column,{field:"closingResidue",header:"Closing Residue",headerStyle:{width:"10em"}}),n.a.createElement(me.Column,{field:"yearsToGo",header:"Yr to go",headerStyle:{width:"6em"}}))},Pe=function(e){var t=e.yearSelectItems,a=e.assetClassSelectItems,r=e.toast,o=Object(g.b)(),c=o.errors,l=o.handleSubmit,i=o.control,m=p(),d=Object(s.a)(m,1)[0].companyId,f=n.a.useState(!1),b=Object(s.a)(f,2),y=b[0],E=b[1],w=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,n,o,c,s,l,i,u,m,p,f,v;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return");case 2:return a=t.taxYear,n=t.assetId,o=t.openingResidue,c=t.addition,s=t.disposal,l=t.initial,i=t.annual,u=t.total,m=t.closingResidue,p=t.yearsToGo,f=t.numberOfYearsAvailable,E(!0),e.prev=4,e.next=7,Be({companyId:d,taxYear:a,assetId:n,openingResidue:o,addition:c,disposal:s,initial:l,annual:i,total:u,closingResidue:m,yearsToGo:p,numberOfYearsAvailable:f});case 7:200===(v=e.sent).status&&r.show(F({severity:"success",detail:v.data})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),_(e.t0,r);case 14:return e.prev=14,E(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[4,11,14,17]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("form",{className:"p-d-flex p-flex-column p-jc-between",onSubmit:l(w)},n.a.createElement("div",{className:"p-d-flex p-jc-between"},n.a.createElement("div",{style:{marginBottom:10}},n.a.createElement(ge,{Controller:g.a,control:i,errors:c,controllerName:"taxYear",label:"Tax Year",required:!0,dropdownOptions:t,errorMessage:"Tax Year is required"})),n.a.createElement("div",{style:{marginBottom:10}},n.a.createElement(ge,{Controller:g.a,control:i,errors:c,controllerName:"assetId",label:"Asset",required:!0,dropdownOptions:a,errorMessage:"Asset is required"})),n.a.createElement("div",{style:{marginBottom:10}},n.a.createElement(Q,{Controller:g.a,control:i,errors:c,controllerName:"openingResidue",label:"Opening Residue",required:!0,errorMessage:"Opening Residue is required"})),n.a.createElement("div",{style:{marginBottom:10}},n.a.createElement(Q,{Controller:g.a,control:i,errors:c,controllerName:"addition",label:"Addition",required:!0,errorMessage:"Addition is required"}))),n.a.createElement("div",{className:"p-d-flex p-jc-between"},n.a.createElement("div",{style:{marginBottom:10}},n.a.createElement(Q,{Controller:g.a,control:i,errors:c,controllerName:"disposal",label:"Disposal",required:!0,errorMessage:"Disposal is required"})),n.a.createElement("div",{style:{marginBottom:10}},n.a.createElement(Q,{Controller:g.a,control:i,errors:c,controllerName:"initial",label:"Initial",required:!0,errorMessage:"Initial is required"})),n.a.createElement("div",{style:{marginBottom:10}},n.a.createElement(Q,{Controller:g.a,control:i,errors:c,controllerName:"annual",label:"Annual",required:!0,errorMessage:"Annual is required"})),n.a.createElement("div",{style:{marginBottom:10}},n.a.createElement(Q,{Controller:g.a,control:i,errors:c,controllerName:"total",label:"Total",required:!0,errorMessage:"Total is required"}))),n.a.createElement("div",{className:"p-d-flex p-jc-between"},n.a.createElement("div",{style:{marginBottom:10}},n.a.createElement(Q,{Controller:g.a,control:i,errors:c,controllerName:"closingResidue",label:"Closing Residue",required:!0,errorMessage:"Closing Residue is required"})),n.a.createElement("div",{style:{marginBottom:10}},n.a.createElement(Q,{Controller:g.a,control:i,errors:c,controllerName:"yearsToGo",label:"Years To Go",required:!0,errorMessage:"Years To Go is required"})),n.a.createElement("div",{style:{marginBottom:10}},n.a.createElement(Q,{Controller:g.a,control:i,errors:c,controllerName:"numberOfYearsAvailable",label:"Year(s) available",required:!0,errorMessage:"Year(s) available is required"})),n.a.createElement("div",{className:"p-d-flex p-flex-column",style:{marginTop:25}},n.a.createElement(u.Button,{type:"submit",label:y?null:"Submit",icon:y?"pi pi-spin pi-spinner":null,style:{width:200}}))))},qe=function(){var e=n.a.useRef(!1),t=p(),a=Object(s.a)(t,1)[0].companyId,r=n.a.useState(),o=Object(s.a)(r,2),c=o[0],l=o[1],i=n.a.useState(),u=Object(s.a)(i,2),m=u[0],d=u[1],f=n.a.useState([]),b=Object(s.a)(f,2),y=b[0],g=b[1];return n.a.useEffect((function(){if(a)return e.current=!0,function(){var t=Object(v.a)(h.a.mark((function t(){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(null),l(!0),t.next=5,Me({companyId:a});case 5:r=t.sent,e.current&&g((function(){var e=r.map((function(e,t){return t<r.length-1?Object(k.a)(Object(k.a)({},e),{},{description:n.a.createElement("strong",null,e.description)}):Object(k.a)(Object(k.a)({},e),{},{description:n.a.createElement("strong",null,e.description),openingResidue:n.a.createElement("strong",null,e.openingResidue),addition:n.a.createElement("strong",null,e.addition),disposalOrTransfer:n.a.createElement("strong",null,e.disposalOrTransfer),initial:n.a.createElement("strong",null,e.initial),annual:n.a.createElement("strong",null,e.annual),total:n.a.createElement("strong",null,e.total),closingResidue:n.a.createElement("strong",null,e.closingResidue)})}));return e.splice(e.length-1,0,{}),e})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.current&&(t.t0.response?d(t.t0.response.data.errors[0]):d(t.t0.message));case 12:return t.prev=12,e.current&&l(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})));return function(){return t.apply(this,arguments)}}()(),function(){return e.current=!1}}),[a]),m?n.a.createElement("p",{style:{color:"#f00"}},m):c?n.a.createElement(re,null):0===y.length?n.a.createElement("p",{style:{color:"#f00"}},"Currently, no data for the selected year for this company"):n.a.createElement(ue.DataTable,{className:"p-datatable-gridlines",value:y,style:{marginTop:40,width:1200},scrollable:!0},n.a.createElement(me.Column,{field:"description",header:"Description",headerStyle:{width:"10em"}}),n.a.createElement(me.Column,{field:"openingResidue",header:"Opening Residue",headerStyle:{width:"10em"}}),n.a.createElement(me.Column,{field:"addition",header:"Addition",headerStyle:{width:"10em"}}),n.a.createElement(me.Column,{field:"disposalOrTransfer",header:"Disposal/Transfer",headerStyle:{width:"10em"}}),n.a.createElement(me.Column,{field:"initial",header:"Initial",headerStyle:{width:"10em"}}),n.a.createElement(me.Column,{field:"annual",header:"Annual",headerStyle:{width:"10em"}}),n.a.createElement(me.Column,{field:"total",header:"Total",headerStyle:{width:"10em"}}),n.a.createElement(me.Column,{field:"closingResidue",header:"Closing Residue",headerStyle:{width:"10em"}}))},Fe=function(){var e=i.modules.capitalAllowance,t=n.a.useRef(),a=Object(l.h)(Ne),r=a.data,o=a.error,c=a.refresh,u=X(),m=Object(s.a)(u,2),d=m[0],p=m[1].onFixedAssetModuleItems,f=Object(l.g)("mode"),h=Object(s.a)(f,2),v=h[0],b=h[1],g=n.a.useState(D()),E=Object(s.a)(g,2),w=E[0],x=E[1],C=n.a.useState(),O=Object(s.a)(C,2),S=O[0],N=O[1],j=n.a.useState([]),A=Object(s.a)(j,2),I=A[0],k=A[1],T=M((function(e){return{label:e.toString(),value:e.toString()}}));return n.a.useEffect((function(){r&&p(r)}),[r,p]),n.a.useEffect((function(){d.fixedAssetModuleItems&&(k(d.fixedAssetModuleItems.map((function(e){var t=e.id;return{label:e.name,value:t}}))),N(d.fixedAssetModuleItems[0].id))}),[d.fixedAssetModuleItems]),o?n.a.createElement(ke,{title:e,error:o,refresh:c}):d.fixedAssetModuleItems?n.a.createElement(se,{title:e},n.a.createElement(ye,{title:e,mode:v,setMode:b,year:w,setYear:x,yearSelectItems:T,assetId:S,setAssetId:N,assetClassSelectItems:I},{adding:n.a.createElement(Pe,{yearSelectItems:T,assetClassSelectItems:I,toast:t.current}),view:n.a.createElement(ie,{title:e,year:w},n.a.createElement(Le,{assetId:S,toast:t.current})),summary:n.a.createElement(ie,{title:e,year:w},n.a.createElement(qe,null))}[v]),n.a.createElement(y.Toast,{baseZIndex:1e3,ref:function(e){return t.current=e}})):n.a.createElement(Ie,{title:e})},Ye=function(e){var t=e.showAddCompany,a=e.setShowAddCompany,r=e.toast,o=e.refresh,c=Object(g.b)(),l=c.errors,m=c.handleSubmit,d=c.control,p=n.a.useState(!1),f=Object(s.a)(p,2),b=f[0],y=f[1],w=function(){var e=Object(v.a)(h.a.mark((function e(t){var n,c,s,l,u,m,d,p,f,v,g;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=2;break}return e.abrupt("return");case 2:return y(!0),n=t.companyName,c=t.cacNumber,s=t.tinNumber,l=t.companyDescription,u=t.openingYear,m=t.closingYear,e.prev=4,e.next=7,we({companyName:n,cacNumber:c,tinNumber:s,companyDescription:l,openingYear:u,closingYear:m});case 7:201===e.sent.status&&(r.show(F({severity:"success",detail:"Company added successfully"})),setTimeout((function(){y(!1),a(!1),o()}),2e3)),e.next=24;break;case 11:if(e.prev=11,e.t0=e.catch(4),y(!1),!e.t0.response){e.next=23;break}if((null===(g=e.t0.response.data.errors)||void 0===g||null===(d=g.error)||void 0===d?void 0:d.companyError)||(null===g||void 0===g||null===(p=g.error)||void 0===p?void 0:p.CompanyDescription)){e.next=19;break}return g.map((function(e){return r.show(F({severity:"error",summary:"Error",detail:e}))})),e.abrupt("return");case 19:(null===g||void 0===g||null===(f=g.error)||void 0===f?void 0:f.companyError)&&g.error.companyError.map((function(e){return r.show(F({severity:"error",summary:"Error",detail:e}))})),(null===g||void 0===g||null===(v=g.error)||void 0===v?void 0:v.CompanyDescription)&&g.error.CompanyDescription.map((function(e){return r.show(F({severity:"error",summary:"Error",detail:e}))})),e.next=24;break;case 23:r.show(F({summary:"Network Error",detail:i.networkErrorMessage}));case 24:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(te.Dialog,{header:"Add Company",visible:t,style:{width:400},focusOnShow:!1,onHide:function(){return a(!1)}},n.a.createElement("form",{onSubmit:m(w)},n.a.createElement("div",{className:"p-d-flex p-flex-column",style:{marginBottom:15}},n.a.createElement("label",{htmlFor:"companyNameInput",style:{marginBottom:10}},"Company Name"),n.a.createElement(g.a,{name:"companyName",control:d,rules:{required:!0},defaultValue:"",render:function(e){return n.a.createElement(E.InputText,{style:{marginBottom:5,width:"100%"},id:"companyNameInput",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}}),l.companyName&&n.a.createElement("span",{style:{fontSize:12,color:"red"}},"Company Name is required")),n.a.createElement("div",{className:"p-d-flex"},n.a.createElement("div",{className:"p-d-flex p-flex-column",style:{marginBottom:15,marginRight:10}},n.a.createElement("label",{htmlFor:"cacNumberInput",style:{marginBottom:10}},"Cac Number"),n.a.createElement(g.a,{name:"cacNumber",control:d,rules:{required:!0},defaultValue:"",render:function(e){return n.a.createElement(E.InputText,{style:{marginBottom:5,width:"100%"},id:"cacNumberInput",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}}),l.cacNumber&&n.a.createElement("span",{style:{fontSize:12,color:"red"}},"Cac Number is required")),n.a.createElement("div",{className:"p-d-flex p-flex-column",style:{marginBottom:15,marginLeft:10}},n.a.createElement("label",{htmlFor:"tinNumberInput",style:{marginBottom:10}},"Tin Number"),n.a.createElement(g.a,{name:"tinNumber",control:d,rules:{required:!0},defaultValue:"",render:function(e){return n.a.createElement(E.InputText,{style:{marginBottom:5,width:"100%"},id:"tinNumberInput",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}}),l.tinNumber&&n.a.createElement("span",{style:{fontSize:12,color:"red"}},"Tin Number is required"))),n.a.createElement("div",{className:"p-d-flex"},n.a.createElement("div",{className:"p-d-flex p-flex-column",style:{marginBottom:15,marginRight:10}},n.a.createElement("label",{htmlFor:"openingYearInput",style:{marginBottom:10}},"Opening Year"),n.a.createElement(g.a,{name:"openingYear",control:d,rules:{required:!0},defaultValue:"",render:function(e){return n.a.createElement(E.InputText,{style:{marginBottom:5,width:"100%"},id:"openingYearInput",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}}),l.openingYear&&n.a.createElement("span",{style:{fontSize:12,color:"red"}},"Opening Year is required")),n.a.createElement("div",{className:"p-d-flex p-flex-column",style:{marginBottom:15,marginLeft:10}},n.a.createElement("label",{htmlFor:"closingYearInput",style:{marginBottom:10}},"Closing Year"),n.a.createElement(g.a,{name:"closingYear",control:d,rules:{required:!0},defaultValue:"",render:function(e){return n.a.createElement(E.InputText,{style:{marginBottom:5,width:"100%"},id:"closingYearInput",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}}),l.closingYear&&n.a.createElement("span",{style:{fontSize:12,color:"red"}},"Closing Year is required"))),n.a.createElement("div",{className:"p-d-flex p-flex-column",style:{marginBottom:15}},n.a.createElement("label",{htmlFor:"companyDescriptionInput",style:{marginBottom:10}},"Address"),n.a.createElement(g.a,{name:"companyDescription",control:d,rules:{required:!0},defaultValue:"",render:function(e){return n.a.createElement(E.InputText,{style:{marginBottom:5,width:"100%"},id:"companyDescriptionInput",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}}),l.companyDescription&&n.a.createElement("span",{style:{fontSize:12,color:"red"}},"Address is required")),n.a.createElement(u.Button,{label:b?null:"Add Company",icon:b?"pi pi-spin pi-spinner":null,type:"submit",style:{width:"100%",marginTop:10}})))},_e=function(e){var t=e.company.companyId,a=e.toast,r=e.setRefreshTrialBalanceTable,o=n.a.useState(),c=Object(s.a)(o,2),l=c[0],m=c[1],d=n.a.useState(),p=Object(s.a)(d,2),f=p[0],y=p[1],g=n.a.useState(M()),E=Object(s.a)(g,1)[0],w=n.a.useState(!1),x=Object(s.a)(w,2),C=x[0],O=x[1],S=function(){var e=Object(v.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=2;break}return e.abrupt("return");case 2:if(l||f){e.next=7;break}return a.show(F({severity:"error",detail:"Add TB File and Select TB Year"})),e.abrupt("return");case 7:if(l){e.next=12;break}return a.show(F({severity:"error",detail:"Add TB File"})),e.abrupt("return");case 12:if(f){e.next=15;break}return a.show(F({severity:"error",detail:"Select TB Year"})),e.abrupt("return");case 15:return O(!0),e.prev=16,e.next=19,Ce({file:l,companyId:t,year:f});case 19:200===(n=e.sent).status&&(y(null),m(null),r(!0),a.show(F({severity:"success",detail:n.data}))),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(16),e.t0.response?a.show(F({severity:"error",summary:"Error",detail:"An error occurred, kindly contact your admin"})):a.show(F({summary:"Network Error",detail:i.networkErrorMessage}));case 26:return e.prev=26,O(!1),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[16,23,26,29]])})));return function(){return e.apply(this,arguments)}}();return n.a.createElement(b.Card,{header:n.a.createElement("div",{className:"p-d-flex p-jc-center p-flex-column",style:{width:"100%"}},n.a.createElement("div",{className:"p-d-flex p-ai-center p-jc-between",style:{padding:"0px 20px"}},n.a.createElement("p",{style:{fontSize:18,fontWeight:600}},"Upload File"),n.a.createElement("div",null,n.a.createElement(ve.Dropdown,{style:{marginRight:20,width:110},value:f,options:E,onChange:function(e){y(e.value)},placeholder:"TB Year"}),n.a.createElement(u.Button,{style:{width:110},label:C?null:"Upload",icon:C?"pi pi-spin pi-spinner":"pi pi-upload",onClick:S}))),n.a.createElement("div",{className:"divider"})),style:{width:"100%",marginBottom:20}},n.a.createElement("div",{className:"p-d-flex"},n.a.createElement("div",{className:"p-d-flex p-ai-center p-jc-center",style:{background:"#f5f6f8",width:"100%",height:100,position:"relative"}},n.a.createElement("p",{className:"accent-color",style:{fontSize:20}},l&&l.item(0).name?'"'.concat(l.item(0).name,'" ready for upload'):"Click or Drag and drop Trial Balance file here to upload."),n.a.createElement("input",{type:"file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",style:{position:"absolute",width:"100%",height:"100%",opacity:0},onChange:function(e){return m(e.target.files)}}))))},Ve=function(e){var t=e.company.companyId,a=e.refreshTrialBalanceTable,r=e.setRefreshTrialBalanceTable,o=n.a.useRef(!1),c=n.a.useState(D()),l=Object(s.a)(c,2),i=l[0],u=l[1],m=n.a.useState(M()),d=Object(s.a)(m,1)[0],p=n.a.useState([]),f=Object(s.a)(p,2),y=f[0],g=f[1],E=n.a.useState(!1),w=Object(s.a)(E,2),x=w[0],C=w[1];return n.a.useEffect((function(){return o.current=!0,a&&(function(){var e=Object(v.a)(h.a.mark((function e(){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.prev=1,e.next=4,Oe({companyId:t,year:i});case 4:a=e.sent,o.current&&g(a?a.map((function(e){return""===e.accountId&&""===e.item&&0===e.debit&&0===e.credit?Object(k.a)(Object(k.a)({},e),{},{debit:"",credit:""}):Object(k.a)(Object(k.a)({},e),{},{debitAmt:q(e.debit),creditAmt:q(e.credit)})})):[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.prev=11,o.current&&C(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}()(),o.current&&r(!1)),function(){return o.current=!1}}),[t,i,a,r]),n.a.createElement(b.Card,{style:{width:"100%"}},n.a.createElement(ue.DataTable,{className:"p-datatable-gridlines",value:y,paginator:!x&&0!==y.length,rows:10,rowsPerPageOptions:[10,20,50,100],header:n.a.createElement("div",{className:"p-d-flex p-ai-center p-jc-between"},n.a.createElement("p",{style:{fontSize:18,fontWeight:600}},"Trial Balance"),n.a.createElement(ve.Dropdown,{style:{width:110},value:i,options:d,onChange:function(e){u(e.value),r(!0)},placeholder:"TB Year"})),footer:x||0===y.length?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-d-flex p-ai-center p-jc-center"},x&&n.a.createElement("i",{className:"pi pi-spin pi-spinner",style:{fontSize:"2em"}}),!x&&0===y.length&&n.a.createElement("p",null,"No Trial Balance data for selected year"))):null},n.a.createElement(me.Column,{field:"accountId",header:"Account ID"}),n.a.createElement(me.Column,{field:"item",header:"Account Description"}),n.a.createElement(me.Column,{field:"debitAmt",header:"Debit Amt"}),n.a.createElement(me.Column,{field:"creditAmt",header:"Credit Amt"})))},ze=function(e){var t=e.setShowAddCompany,a=e.showCompanyPicker,r=e.setShowCompanyPicker,o=e.company,c=e.onSelectCompany,s=e.companySelectItems,l=e.setRefreshTrialBalanceTable;return n.a.useEffect((function(){return l(!0)}),[l]),n.a.createElement(te.Dialog,{header:"Company",footer:n.a.createElement("div",null,n.a.createElement(u.Button,{label:"Add Company",onClick:function(){t(!0),r(!1)},className:"p-button-outlined"}),n.a.createElement(u.Button,{label:"Proceed",disabled:!o.companyId,onClick:function(){return o.companyId&&r(!1)}})),visible:a,style:{width:500},blockScroll:!0,focusOnShow:!1,closeOnEscape:!1,closable:!1,onHide:function(){return r(!1)}},n.a.createElement("div",{className:"p-d-flex p-flex-column",style:{height:300}},n.a.createElement("label",{htmlFor:"companyNameInput",style:{margin:"0px 0px 10px 0px"}}),n.a.createElement(ve.Dropdown,{value:o,options:s,optionLabel:"name",autoFocus:!0,filter:!0,filterBy:"name",onChange:function(e){c(e.value),sessionStorage.setItem("cid",e.value.companyId)},placeholder:"Select a Company"}),s&&0===s.length&&n.a.createElement("div",{className:"p-d-flex p-ai-center",style:{fontSize:14,marginTop:15}},n.a.createElement("i",{className:"pi pi-exclamation-triangle",style:{marginRight:10,color:"#FBC02D",fontSize:20}}),n.a.createElement("span",null,"There are currently no companies, click add company button."))))},Ue=function(){var e=i.modules.dashboard,t=n.a.useRef(),a=Object(l.h)(Se),r=a.data,o=a.error,c=a.refresh,u=n.a.useState(!0),m=Object(s.a)(u,2),d=m[0],f=m[1],h=n.a.useState(!1),v=Object(s.a)(h,2),b=v[0],g=v[1],E=n.a.useState(null),w=Object(s.a)(E,2),x=w[0],C=w[1],O=n.a.useState(!0),S=Object(s.a)(O,2),N=S[0],j=S[1],A=p(),I=Object(s.a)(A,2),k=I[0],T=I[1].onSelectCompany,B=X(),D=Object(s.a)(B,2),M=D[0],R=D[1].onCompanies;return n.a.useEffect((function(){b||f(!0)}),[b]),n.a.useEffect((function(){r&&R(r)}),[r,R]),n.a.useEffect((function(){M.companies&&C(M.companies.map((function(e){var t=e.id,a=e.companyName,r=e.companyDescription,n=e.cacNumber,o=e.tinNumber;return e.isActive&&{name:a,value:{companyId:t,companyName:a,companyDescription:r,cacNumber:n,tinNumber:o}}})))}),[M.companies]),o?n.a.createElement(ke,{title:e,error:o,refresh:c}):M.companies?n.a.createElement(se,{title:e},n.a.createElement(_e,{company:k,toast:t.current,setRefreshTrialBalanceTable:j}),k.companyId&&n.a.createElement(Ve,{company:k,refreshTrialBalanceTable:N,setRefreshTrialBalanceTable:j}),n.a.createElement(Ye,{showAddCompany:b,setShowAddCompany:g,toast:t.current,refresh:c}),null===k.companyId&&n.a.createElement(ze,{setShowAddCompany:g,showCompanyPicker:d,setShowCompanyPicker:f,company:k,onSelectCompany:T,companySelectItems:x,setRefreshTrialBalanceTable:j}),n.a.createElement(y.Toast,{baseZIndex:1e3,ref:function(e){return t.current=e}})):n.a.createElement(Ie,{title:e})},We=function(e){var t=e.year,a=e.setYear,r=e.yearSelectItems,o=n.a.useState(),c=Object(s.a)(o,2),l=c[0],i=c[1],m=n.a.useState(),d=Object(s.a)(m,2),p=d[0],f=d[1],h=n.a.useState([{accountDescription:"Petty Cash",debitAmount:"\u20a652,154.07",creditAmount:"\u20a60.00"},{accountDescription:"Inventory",debitAmount:"\u20a620,000.00",creditAmount:"\u20a60.00"},{accountDescription:"Plant & Machinery",debitAmount:"\u20a63,966,900.64",creditAmount:"\u20a60.00"},{accountDescription:"Furniture & Fittings",debitAmount:"\u20a612,252,961.97",creditAmount:"\u20a60.00"},{accountDescription:"Branch Cash Movement",debitAmount:"\u20a60.00",creditAmount:"\u20a6349.03"}]),v=Object(s.a)(h,1)[0];return n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{className:"p-d-flex p-jc-between"},n.a.createElement(ve.Dropdown,{style:{width:250},value:l,options:[{label:"Revenue",value:"Revenue"},{label:"Other Income",value:"Other Income"}],onChange:function(e){i(e.value)},placeholder:"Select an Item"}),n.a.createElement(ve.Dropdown,{style:{width:250},value:t,options:r,onChange:function(e){a(e.value)},placeholder:"Select Year"}),n.a.createElement(u.Button,{type:"submit",label:"Submit",style:{width:250}})),n.a.createElement(ue.DataTable,{className:"p-datatable-gridlines",value:v,selection:p,onSelectionChange:function(e){f(e.value)},style:{marginTop:50}},n.a.createElement(me.Column,{selectionMode:"multiple",style:{width:"3em"}}),n.a.createElement(me.Column,{field:"accountDescription",header:"Account Description"}),n.a.createElement(me.Column,{field:"debitAmount",header:"Debit Amount"}),n.a.createElement(me.Column,{field:"creditAmount",header:"Credit Amount"}),n.a.createElement(me.Column,{field:"mappedCode",header:"Mapped To"})))},Ge=function(){var e=n.a.useState([{category:"Net Book Value of Fixed Assets as at 31.12.19",debit:"",credit:"\u20a610,633,000.00"},{category:"Less:",debit:"",credit:""},{category:"Tax Written Down Value as at 31.12.19",debit:"(\u20a62,932,845,440.00)",credit:""},{category:"Unabsorbed Capital Allowance",debit:"(\u20a6561,061,694.00)",credit:""},{category:"Impairment on Receivables",debit:"\u20a644,723,000.00",credit:"(\u20a63,449,184,134.00)"}]),t=Object(s.a)(e,1)[0];return n.a.createElement(ue.DataTable,{className:"p-datatable-gridlines",value:t,style:{marginTop:40}},n.a.createElement(me.Column,{field:"category",header:""}),n.a.createElement(me.Column,{field:"debit",header:"\u20a6"}),n.a.createElement(me.Column,{field:"credit",header:"\u20a6"}))},Xe=function(){var e=i.modules.deferredTax,t=Object(l.g)("mode"),a=Object(s.a)(t,2),r=a[0],o=a[1],c=n.a.useState(D()),u=Object(s.a)(c,2),m=u[0],d=u[1],p=M((function(e){return{label:e.toString(),value:e.toString()}}));return n.a.createElement(se,{title:e},n.a.createElement(ye,{title:e,mode:r,setMode:o,year:m,setYear:d,yearSelectItems:p},{mapping:n.a.createElement(We,{year:m,setYear:d,yearSelectItems:p}),view:n.a.createElement(ie,{title:e,year:m},n.a.createElement(Ge,null))}[r]))},He=a(44),Ze=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o,c,s,l,i,u,m,d,p,f,v,b,y;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.companyId,r=t.yearId,n=t.mappedCode,o=t.assetId,c=t.triBalanceId,s=t.isCost,l=t.openingCost,i=t.transferCost,u=t.transferDepreciation,m=t.isTransferCostRemoved,d=t.isTransferDepreciationRemoved,p=t.costAddition,f=t.costDisposal,v=t.openingDepreciation,b=t.depreciationAddition,y=t.depreciationDisposal,e.prev=1,e.next=4,C.a.post("/api/FixedAsset",{companyId:a,yearId:r,mappedCode:n,assetId:o,triBalanceId:c,isCost:s,openingCost:l,transferCost:i,transferDepreciation:u,isTransferCostRemoved:m,isTransferDepreciationRemoved:d,costAddition:p,costDisposal:f,openingDepreciation:v,depreciationAddition:b,depreciationDisposal:y});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),Je=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.companyId,r=t.year,e.prev=1,e.next=4,C.a.get("/api/FixedAsset/".concat(a,"/").concat(r));case 4:return n=e.sent,o=n.data,e.abrupt("return",o);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,e.prev=1,e.next=4,C.a.put("/api/FixedAsset/fixed-asset/".concat(a));case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),$e=a(16),Qe=function(e){var t=e.title,a=e.tbData,r=e.selectedAccounts,o=e.setSelectedAccounts,c=e.trialBalanceRefresh,l=e.toast,m=n.a.useState([]),d=Object(s.a)(m,2),p=d[0],f=d[1],b=n.a.useState([]),y=Object(s.a)(b,2),g=y[0],E=y[1];return n.a.createElement(ue.DataTable,{className:"p-datatable-gridlines",value:a,paginator:0!==a.length,rows:10,rowsPerPageOptions:[10,20,50,100],selection:r,onSelectionChange:function(e){e.value.length>0&&a.find((function(t){return t.id===e.value[e.value.length-1].id})).mappedTo?l.show(F({severity:"error",detail:"This item has been mapped"})):o(e.value)},style:{marginTop:50},footer:0===a.length&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-d-flex p-ai-center p-jc-center"},n.a.createElement("p",null,"No Trial Balance data, upload a Trial Balance file")))},t===i.modules.profit_loss&&n.a.createElement(me.Column,{field:"isDebitChecked",header:"Debit",style:{width:"5em",textAlign:"center"},body:function(e){return n.a.createElement(He.Checkbox,{onChange:function(t){if(f((function(a){return t.checked?a.concat([e.id]):a.filter((function(t){return t!==e.id}))})),e.mappedTo)l.show(F({severity:"error",detail:"This item has been mapped"}));else if(t.checked){var a,n=r.find((function(t,r){return a=r,t.trialBalanceId===e.id}));o(n?function(t){return t[a]=Object(k.a)(Object(k.a)({},t[a]),{},{trialBalanceId:e.id,isDebit:!0,isCredit:!0,isBoth:!0}),t}:[].concat(Object($e.a)(r),[{trialBalanceId:e.id,isDebit:!0,isCredit:!1,isBoth:!1}]))}else{var c,s=r.find((function(t,a){return c=a,t.trialBalanceId===e.id}));(null===s||void 0===s?void 0:s.isCredit)?o((function(t){return t[c]=Object(k.a)(Object(k.a)({},t[c]),{},{trialBalanceId:e.id,isDebit:!1,isCredit:!0,isBoth:!1}),t})):o(r.filter((function(t){return t.trialBalanceId!==e.id})))}},checked:p.includes(e.id)})}}),t===i.modules.profit_loss&&n.a.createElement(me.Column,{field:"isCreditChecked",header:"Credit",style:{width:"5em",textAlign:"center"},body:function(e){return n.a.createElement(He.Checkbox,{onChange:function(t){if(E((function(a){return t.checked?a.concat([e.id]):a.filter((function(t){return t!==e.id}))})),e.mappedTo)l.show(F({severity:"error",detail:"This item has been mapped"}));else if(t.checked){var a,n=r.find((function(t,r){return a=r,t.trialBalanceId===e.id}));o(n?function(t){return t[a]=Object(k.a)(Object(k.a)({},t[a]),{},{trialBalanceId:e.id,isDebit:!0,isCredit:!0,isBoth:!0}),t}:[].concat(Object($e.a)(r),[{trialBalanceId:e.id,isDebit:!1,isCredit:!0,isBoth:!1}]))}else{var c,s=r.find((function(t,a){return c=a,t.trialBalanceId===e.id}));(null===s||void 0===s?void 0:s.isDebit)?o((function(t){return t[c]=Object(k.a)(Object(k.a)({},t[c]),{},{trialBalanceId:e.id,isDebit:!0,isCredit:!1,isBoth:!1}),t})):o(r.filter((function(t){return t.trialBalanceId!==e.id})))}},checked:g.includes(e.id)})}}),t!==i.modules.profit_loss&&n.a.createElement(me.Column,{selectionMode:"multiple",style:{width:"3.5em",textAlign:"center"}}),n.a.createElement(me.Column,{field:"accountId",header:"Account ID"}),n.a.createElement(me.Column,{field:"item",header:"Account Description"}),n.a.createElement(me.Column,{field:"debitAmt",header:"Debit Amt"}),n.a.createElement(me.Column,{field:"creditAmt",header:"Credit Amt"}),a&&a.some((function(e){return e.mappedTo}))&&n.a.createElement(me.Column,{field:"mappedTo",header:"Mapped To"}),a&&a.some((function(e){return e.mappedTo}))&&n.a.createElement(me.Column,{field:"unmap",header:"Unmap",body:function(e){return e.mappedTo&&n.a.createElement(u.Button,{className:"p-button-danger p-button-text",label:"Unmap",onClick:Object(v.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ke({id:e.id});case 3:200===(a=t.sent).status&&(c(),l.show(F({severity:"success",detail:a.data}))),t.next=12;break;case 7:if(t.prev=7,t.t0=t.catch(0),"Network Error"!==t.t0.message){t.next=11;break}return t.abrupt("return",l.show(F({severity:"success",detail:i.networkErrorMessage})));case 11:c();case 12:case"end":return t.stop()}}),t,null,[[0,7]])})))})}}))},et=function(e){var t=e.year,a=e.setYear,r=e.yearSelectItems,o=e.assetClassSelectItems,c=e.tbData,l=e.trialBalanceRefresh,i=e.toast,m="cost",d=Object(g.b)(),f=d.errors,b=d.handleSubmit,y=d.control,E=p(),w=Object(s.a)(E,1)[0].companyId,x=n.a.useState(),C=Object(s.a)(x,2),O=C[0],S=C[1],N=n.a.useState(!1),j=Object(s.a)(N,2),A=j[0],I=j[1],k=n.a.useState(q(0)),T=Object(s.a)(k,2),B=T[0],D=T[1],M=n.a.useState([]),R=Object(s.a)(M,2),L=R[0],P=R[1],Y=n.a.useState(),V=Object(s.a)(Y,2),z=V[0],U=V[1],W=n.a.useState(),G=Object(s.a)(W,2),X=G[0],H=G[1],Z=[{label:"Cost",value:m},{label:"Depreciation",value:"depreciation"}];n.a.useEffect((function(){l()}),[l]),n.a.useEffect((function(){if(L){var e=L.reduce((function(e,t){return e+(z===m?t.debit:t.credit)}),0);S(e),D(q(e))}}),[L,z]);var J=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o,c,s,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!A){e.next=2;break}return e.abrupt("return");case 2:if(a=t.assetClass,r=t.assetType,n=t.year,o=t.openingBalance,c=t.addition,s=t.disposal,l=t.transfer,0!==L.length){e.next=6;break}return i.show(F({severity:"error",detail:"Select at least one account from the trial balance table"})),e.abrupt("return");case 6:if(!isNaN(o)){e.next=11;break}return i.show(F({severity:"error",detail:"Opening balance is not a number"})),e.abrupt("return");case 11:if(!isNaN(c)){e.next=16;break}return i.show(F({severity:"error",detail:"".concat(r===m?"Addition":"Charge per year"," value is not a number")})),e.abrupt("return");case 16:if(!isNaN(s)){e.next=21;break}return i.show(F({severity:"error",detail:"Disposal value is not a number"})),e.abrupt("return");case 21:if(!isNaN(l)){e.next=24;break}return i.show(F({severity:"error",detail:"Transfer value is not a number"})),e.abrupt("return");case 24:return I(!0),e.prev=25,e.next=28,Ze({companyId:w,yearId:n,mappedCode:"fixedasset",assetId:a,triBalanceId:L.map((function(e){return e.id})),isCost:r===m,openingCost:r===m?Number(o):0,transferCost:r===m?Number(l):0,transferDepreciation:r!==m?Number(l):0,isTransferCostRemoved:r===m&&X,isTransferDepreciationRemoved:r!==m&&X,costAddition:r===m?Number(c):0,costDisposal:r===m?Number(s):0,costClosing:r===m?Number(O):0,openingDepreciation:r!==m?Number(o):0,depreciationAddition:r!==m?Number(c):0,depreciationDisposal:r!==m?Number(s):0,depreciationClosing:r!==m?Number(O):0});case 28:200===e.sent.status&&i.show(F({severity:"success",detail:"Fixed asset mapped successfully"})),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(25),_(e.t0,i);case 35:return e.prev=35,I(!1),e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[25,32,35,38]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{className:"p-d-flex p-flex-column p-jc-between",onSubmit:b(J)},n.a.createElement("div",{className:"p-d-flex p-ai-start p-jc-between",style:{marginBottom:20}},n.a.createElement(ge,{Controller:g.a,control:y,errors:f,controllerName:"assetClass",label:"Fixed Asset Class",required:!0,dropdownOptions:o,errorMessage:"Fixed Asset Class is required"}),n.a.createElement(ge,{Controller:g.a,control:y,errors:f,controllerName:"assetType",label:"Cost / Depreciation",required:!0,dropdownOptions:Z,onChangeCallback:U,errorMessage:"Fixed Asset Type is required"}),n.a.createElement(ge,{Controller:g.a,control:y,errors:f,controllerName:"year",label:"Year",required:!0,dropdownOptions:r,onChangeCallback:a,errorMessage:"Year is required",defaultValue:t}),n.a.createElement(Q,{Controller:g.a,control:y,errors:f,controllerName:"closingBalance",label:"Closing Balance",disabled:!0,placeholder:"Closing Balance",defaultValue:B,value:B})),n.a.createElement("div",{className:"p-d-flex p-ai-start p-jc-between"},n.a.createElement(Q,{Controller:g.a,control:y,errors:f,controllerName:"openingBalance",label:"Opening Balance",required:!0,errorMessage:"Opening Balance is required"}),n.a.createElement(Q,{Controller:g.a,control:y,errors:f,controllerName:"addition",label:"depreciation"===z?"Charge per year":"Addition",required:!0,errorMessage:"Addition is required"}),n.a.createElement(Q,{Controller:g.a,control:y,errors:f,controllerName:"disposal",label:"Disposal",required:!0,errorMessage:"Disposal is required"}),n.a.createElement(Q,{Controller:g.a,control:y,errors:f,controllerName:"transfer",label:"Transfer",required:!0,errorMessage:"Transfer is required"})),n.a.createElement("div",{className:"p-d-flex p-flex-column",style:{marginTop:20}},n.a.createElement("div",{className:"p-field-checkbox"},n.a.createElement(He.Checkbox,{inputId:"transferOut",checked:X,onChange:function(e){return H(e.checked)}}),n.a.createElement("label",{htmlFor:"transferOut"},"Transfer Out")),n.a.createElement(u.Button,{type:"submit",label:A?null:"Submit",icon:A?"pi pi-spin pi-spinner":null,style:{width:200}}))),n.a.createElement(Qe,{tbData:c,trialBalanceRefresh:l,toast:i,selectedAccounts:L,setSelectedAccounts:P}))},tt=function(e){var t=e.year,a=n.a.useRef(!1),r=p(),o=Object(s.a)(r,1)[0].companyId,c=n.a.useState(),l=Object(s.a)(c,2),i=l[0],u=l[1],m=n.a.useState(),d=Object(s.a)(m,2),f=d[0],b=d[1],y=n.a.useState(),g=Object(s.a)(y,2),E=g[0],w=g[1],x=n.a.useState([{category:n.a.createElement("strong",null,"Cost")},{category:"Opening Balance",key:"openingCost"},{category:"Additions",key:"costAddition"},{category:"Disposal",key:"costDisposal"},{category:"Transfer",key:"transferCost"},{category:n.a.createElement("strong",null,"As at 31/12/",t-1),key:"costClosing"},{category:null},{category:n.a.createElement("strong",null,"Depreciation")},{category:"Opening Balance",key:"openingDepreciation"},{category:"Charged for the year",key:"depreciationAddition"},{category:"Disposal",key:"depreciationDisposal"},{category:"Transfer",key:"transferDepreciation"},{category:n.a.createElement("strong",null,"As at 31/12/",t-1),key:"depreciationClosing"},{category:null},{category:n.a.createElement("strong",null,"Net Book Value")},{category:n.a.createElement("strong",null,"As at 31/12/",t-1),key:"netValue"}]),C=Object(s.a)(x,2),O=C[0],S=C[1];return n.a.useEffect((function(){if(o)return a.current=!0,function(){var e=Object(v.a)(h.a.mark((function e(){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(null),u(!0),e.next=5,Je({companyId:o,year:t});case 5:r=e.sent,a.current&&(w(r.fixedAssetData),S((function(e){var t=Array.from(e);return r.fixedAssetData.forEach((function(e,a){t.forEach((function(t){switch(t.key){case"openingCost":t[e.fixedAssetName]=e.openingCost,t.total=r.total.openingCostTotal;break;case"costAddition":t[e.fixedAssetName]=e.costAddition,t.total=r.total.additionCostTotal;break;case"costDisposal":t[e.fixedAssetName]=e.costDisposal,t.total=r.total.disposalCostTotal;break;case"transferCost":t[e.fixedAssetName]=e.transferCost,t.total=r.total.transferCostTotal;break;case"costClosing":t[e.fixedAssetName]=n.a.createElement("strong",null,e.costClosing),t.total=n.a.createElement("strong",null,r.total.closingCostTotal);break;case"openingDepreciation":t[e.fixedAssetName]=e.openingDepreciation,t.total=r.total.openingDepreciationTotal;break;case"depreciationAddition":t[e.fixedAssetName]=e.depreciationAddition,t.total=r.total.additionDepreciationTotal;break;case"depreciationDisposal":t[e.fixedAssetName]=e.depreciationDisposal,t.total=r.total.disposalDepreciationTotal;break;case"transferDepreciation":t[e.fixedAssetName]=e.transferDepreciation,t.total=r.total.transferDepreciationTotal;break;case"depreciationClosing":t[e.fixedAssetName]=n.a.createElement("strong",null,e.depreciationClosing),t.total=n.a.createElement("strong",null,r.total.closingDepreciationTotal);break;case"netValue":t[e.fixedAssetName]=n.a.createElement("strong",null,isNaN(r.netBookValue[a].value[0])?r.netBookValue[a].value:q(r.netBookValue[a].value.replaceAll(/,/g,""))),t.total=n.a.createElement("strong",null,q(r.netBookValue.reduce((function(e,t){return e+Number(isNaN(t.value[0])?t.value.slice(1).replaceAll(/,/g,""):t.value.replaceAll(/,/g,""))}),0)))}}))})),t}))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a.current&&(e.t0.response?b(e.t0.response.data.errors[0]):b(e.t0.message));case 12:return e.prev=12,a.current&&u(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(){return e.apply(this,arguments)}}()(),function(){return a.current=!1}}),[o,t]),f?n.a.createElement("p",{style:{color:"#f00"}},f):i?n.a.createElement(re,null):n.a.createElement(ue.DataTable,{className:"p-datatable-gridlines",value:O,style:{marginTop:40}},n.a.createElement(me.Column,{field:"category",header:""}),E&&E.map((function(e){return n.a.createElement(me.Column,{key:e.fixedAssetName,field:e.fixedAssetName,header:"".concat(e.fixedAssetName)})})),n.a.createElement(me.Column,{field:"total",header:"Total"}))},at=function(){var e=i.modules.fixedAsset,t=n.a.useRef(),a=Object(l.h)(Ne),r=a.data,o=a.error,c=a.refresh,u=Object(l.h)(Ae),m=u.data,d=u.error,p=u.refresh,f=Object(l.g)("mode"),h=Object(s.a)(f,2),v=h[0],b=h[1],g=n.a.useState(D()),E=Object(s.a)(g,2),w=E[0],x=E[1],C=n.a.useState([]),O=Object(s.a)(C,2),S=O[0],N=O[1],j=n.a.useState([]),A=Object(s.a)(j,2),I=A[0],k=A[1],T=X(),B=Object(s.a)(T,2),R=B[0],L=B[1],P=L.onTrialBalance,q=L.onFixedAssetModuleItems,F=M((function(e){return{label:e.toString(),value:e.toString()}}));return n.a.useEffect((function(){r&&q(r)}),[r,q]),n.a.useEffect((function(){R.fixedAssetModuleItems&&k(R.fixedAssetModuleItems.map((function(e){var t=e.id;return{label:e.name,value:t}})))}),[R.fixedAssetModuleItems]),n.a.useEffect((function(){m&&P(m)}),[P,m]),n.a.useEffect((function(){Y(R,N)}),[R]),o?n.a.createElement(ke,{title:e,error:o,refresh:c}):d?n.a.createElement(ke,{title:e,error:d,refresh:p}):R.fixedAssetModuleItems&&R.trialBalance?n.a.createElement(se,{title:e},n.a.createElement(ye,{title:e,mode:v,setMode:b,year:w,setYear:x,yearSelectItems:F},{mapping:n.a.createElement(et,{year:w,setYear:x,yearSelectItems:F,assetClassSelectItems:I,tbData:S,trialBalanceRefresh:p,toast:t.current}),view:n.a.createElement(ie,{title:e,year:w},n.a.createElement(tt,{year:w}))}[v]),n.a.createElement(y.Toast,{baseZIndex:1e3,ref:function(e){return t.current=e}})):n.a.createElement(Ie,{title:e})},rt=function(){var e=Object(g.b)(),t=e.errors,a=e.handleSubmit,r=e.control,o=I(),c=Object(s.a)(o,1)[0].isAuthenticated,m=Object(l.j)().push,d=n.a.useState(!1),p=Object(s.a)(d,2),f=p[0],w=p[1],x=n.a.useRef(),C=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return w(!0),a=t.email,e.prev=4,e.next=7,S({email:a});case 7:r=e.sent,m({pathname:i.routes.reset_password,state:r}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),w(!1),e.t0.response?(n=e.t0.response.data.message,x.current.show(F({severity:"error",summary:"Error",detail:n}))):x.current.show(F({severity:"error",summary:"Network Error",detail:i.networkErrorMessage}));case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}();if(c){var O=sessionStorage.getItem("path")||i.routes.dashboard;return sessionStorage.removeItem("path"),n.a.createElement(l.b,{to:O})}return n.a.createElement("div",{className:"p-d-flex p-jc-center p-ai-center",style:{height:"100vh"}},n.a.createElement(b.Card,{header:n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{className:"p-text-center accent-color"},"Tax Computation"),n.a.createElement("div",{className:"divider"})),style:{width:320}},n.a.createElement("form",{className:"p-d-flex p-flex-column",onSubmit:a(C)},n.a.createElement("div",{style:{marginBottom:15}},n.a.createElement(g.a,{name:"email",control:r,rules:{required:!0},defaultValue:"",render:function(e){return n.a.createElement(E.InputText,{style:{marginBottom:5,width:"100%"},placeholder:"Email",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}}),t.email&&n.a.createElement("span",{style:{fontSize:12,color:"red"}},"Email is required")),n.a.createElement(u.Button,{type:"submit",label:f?null:"Forgot Password",icon:f?"pi pi-spin pi-spinner":null,style:{width:"100%"}})),n.a.createElement(l.a,{href:i.routes.login,className:"auth-link"},n.a.createElement("p",{style:{marginBottom:0,marginTop:20,fontSize:14}},"Back to login"))),n.a.createElement(y.Toast,{ref:function(e){return x.current=e}}))},nt=function(){return n.a.createElement(l.b,{to:"/login"})},ot=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.lossBroughtFoward,r=t.unrelievedCapitalAllowanceBroughtFoward,n=t.trialBalanceId,e.prev=1,e.next=4,C.a.post("/api/IncomeTax/add-income-tax",{lossBroughtFoward:a,unrelievedCapitalAllowanceBroughtFoward:r,trialBalanceId:n});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),ct=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.companyId,r=t.year,e.prev=1,e.next=4,C.a.get("/api/incomeTax/".concat(a,"/").concat(r));case 4:return n=e.sent,o=n.data,e.abrupt("return",o);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),st=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.delete("/api/InvestmentAllowance/investment-allowance/".concat(t));case 3:return a=e.sent,r=a.data,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),lt=function(e){var t=e.year,a=e.toast,r=n.a.useRef(!1),o=p(),c=Object(s.a)(o,1)[0].companyId,l=n.a.useState(),i=Object(s.a)(l,2),u=i[0],m=i[1],d=n.a.useState(),f=Object(s.a)(d,2),b=f[0],y=f[1],g=n.a.useState([]),E=Object(s.a)(g,2),w=E[0],x=E[1];return n.a.useEffect((function(){if(c){r.current=!0;var e=function(){var o=Object(v.a)(h.a.mark((function o(){var s;return h.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,y(null),m(!0),o.next=5,ct({companyId:c,year:t});case 5:s=o.sent,r.current&&x(s.map((function(t){return Object(k.a)(Object(k.a)({},t),{},{description:n.a.createElement("div",{className:"p-d-flex p-jc-between p-ai-center"},n.a.createElement("p",null,t.description),t.canDelete&&n.a.createElement("i",{className:"pi pi-times-circle delete",style:{fontSize:14,marginTop:2},onClick:Object(v.a)(h.a.mark((function r(){var n;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,st(t.id);case 3:(n=r.sent)&&(a.show(F({severity:"success",detail:n})),e()),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.log(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))}))})}))),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(0),r.current&&(o.t0.response?y(o.t0.response.data.errors[0]):y(o.t0.message));case 12:return o.prev=12,r.current&&m(!1),o.finish(12);case 15:case"end":return o.stop()}}),o,null,[[0,9,12,15]])})));return function(){return o.apply(this,arguments)}}();return e(),function(){return r.current=!1}}}),[c,a,t]),b?n.a.createElement("p",{style:{color:"#f00"}},b):u?n.a.createElement(re,null):n.a.createElement(ue.DataTable,{className:"p-datatable-gridlines",value:w,style:{marginTop:40}},n.a.createElement(me.Column,{field:"description",header:""}),n.a.createElement(me.Column,{field:"columnOne",header:"\u20a6"}),n.a.createElement(me.Column,{field:"columnTwo",header:"\u20a6"}))},it=function(e){var t=e.tbData,a=e.trialBalanceRefresh,r=e.toast,o=Object(g.b)(),c=o.errors,l=o.handleSubmit,i=o.control,m=n.a.useState(!1),d=Object(s.a)(m,2),p=d[0],f=d[1],b=n.a.useState([]),y=Object(s.a)(b,2),E=y[0],w=y[1],x=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=2;break}return e.abrupt("return");case 2:if(a=t.lossBroughtFoward,n=t.unrelievedCapitalAllowanceBroughtFoward,0!==E.length){e.next=6;break}return r.show(F({severity:"error",detail:"Select at least one account from the trial balance table"})),e.abrupt("return");case 6:return f(!0),e.prev=7,e.next=10,ot({lossBroughtFoward:""===a?0:a,unrelievedCapitalAllowanceBroughtFoward:""===n?0:n,trialBalanceId:E.map((function(e){return e.id}))});case 10:200===e.sent.status&&r.show(F({severity:"success",detail:"Income tax mapped successfully"})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),_(e.t0,r);case 17:return e.prev=17,f(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[7,14,17,20]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{className:"p-d-flex p-jc-between",onSubmit:l(x)},n.a.createElement(Q,{Controller:g.a,control:i,errors:c,controllerName:"lossBroughtFoward",label:"Loss B/F",required:!1,width:250}),n.a.createElement(Q,{Controller:g.a,control:i,errors:c,controllerName:"unrelievedCapitalAllowanceBroughtFoward",label:"Unrelieved Capital Allowance B/F",required:!1,width:250}),n.a.createElement("div",null,n.a.createElement("p",{style:{color:"transparent",marginTop:0,marginBottom:5}},"Submit"),n.a.createElement(u.Button,{type:"submit",label:p?null:"Submit",icon:p?"pi pi-spin pi-spinner":null,style:{width:250}}))),n.a.createElement(Qe,{tbData:t,trialBalanceRefresh:a,toast:r,selectedAccounts:E,setSelectedAccounts:w}))},ut=function(){var e=i.modules.incomeTax,t=n.a.useRef(),a=Object(l.h)(Ae),r=a.data,o=a.error,c=a.refresh,u=n.a.useState([]),m=Object(s.a)(u,2),d=m[0],p=m[1],f=Object(l.g)("mode"),h=Object(s.a)(f,2),v=h[0],b=h[1],g=n.a.useState(D()),E=Object(s.a)(g,2),w=E[0],x=E[1],C=X(),O=Object(s.a)(C,2),S=O[0],N=O[1].onTrialBalance,j=M((function(e){return{label:e.toString(),value:e.toString()}}));return n.a.useEffect((function(){r&&N(r)}),[N,r]),n.a.useEffect((function(){Y(S,p)}),[S]),o?n.a.createElement(ke,{title:e,error:o,refresh:c}):S.trialBalance?n.a.createElement(se,{title:e},n.a.createElement(ye,{title:e,mode:v,setMode:b,year:w,setYear:x,yearSelectItems:j},{mapping:n.a.createElement(it,{tbData:d,trialBalanceRefresh:c,toast:t.current}),view:n.a.createElement(ie,{title:e,year:w},n.a.createElement(lt,{year:w,toast:t.current}))}[v]),n.a.createElement(y.Toast,{baseZIndex:1e3,ref:function(e){return t.current=e}})):n.a.createElement(Ie,{title:e})},mt=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.companyId,r=t.assetId,n=t.yearId,e.prev=1,e.next=4,C.a.post("/api/InvestmentAllowance/investment-allowance",{companyId:a,assetId:r,yearId:n});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),dt=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.companyId,r=t.year,e.prev=1,e.next=4,C.a.get("/api/InvestmentAllowance/".concat(a,"/").concat(r));case 4:return n=e.sent,o=n.data,e.abrupt("return",o);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),pt=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.delete("/api/InvestmentAllowance/investment-allowance/".concat(t));case 3:return a=e.sent,r=a.data,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ft=function(e){var t=e.year,a=e.toast,r=n.a.useRef(!1),o=p(),c=Object(s.a)(o,1)[0].companyId,l=n.a.useState(),i=Object(s.a)(l,2),u=i[0],m=i[1],d=n.a.useState(),f=Object(s.a)(d,2),b=f[0],y=f[1],g=n.a.useState([]),E=Object(s.a)(g,2),w=E[0],x=E[1];return n.a.useEffect((function(){if(c){r.current=!0;var e=function(){var o=Object(v.a)(h.a.mark((function o(){var s;return h.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,y(null),m(!0),o.next=5,dt({companyId:c,year:t});case 5:s=o.sent,r.current&&x(s.investment.investments.map((function(t){return Object(k.a)(Object(k.a)({},t),{},{name:n.a.createElement("div",{className:"p-d-flex p-jc-between p-ai-center"},n.a.createElement("p",null,t.name),n.a.createElement("i",{className:"pi pi-times-circle delete",style:{fontSize:14,marginTop:2},onClick:Object(v.a)(h.a.mark((function r(){var n;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,pt(t.id);case 3:(n=r.sent)&&(a.show(F({severity:"success",detail:n})),e()),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.log(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))}))})})).concat([{name:"Investment Allowance @ 10%",amount:s.investment.investmentAllowanceatTenPercent}])),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(0),r.current&&(o.t0.response?y(o.t0.response.data.errors[0]):y(o.t0.message));case 12:return o.prev=12,r.current&&m(!1),o.finish(12);case 15:case"end":return o.stop()}}),o,null,[[0,9,12,15]])})));return function(){return o.apply(this,arguments)}}();return e(),function(){return r.current=!1}}}),[c,a,t]),b?n.a.createElement("p",{style:{color:"#f00"}},b):u?n.a.createElement(re,null):n.a.createElement(ue.DataTable,{className:"p-datatable-gridlines",value:w,style:{marginTop:40}},n.a.createElement(me.Column,{field:"name",header:"Additions to:"}),n.a.createElement(me.Column,{field:"amount",header:"Amount"}))},ht=function(e){var t=e.yearSelectItems,a=e.assetClassSelectItems,r=e.toast,o=Object(g.b)(),c=o.errors,l=o.handleSubmit,i=o.control,m=p(),d=Object(s.a)(m,1)[0].companyId,f=n.a.useState(!1),b=Object(s.a)(f,2),y=b[0],E=b[1],w=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return");case 2:return a=t.yearId,n=t.assetId,E(!0),e.prev=4,e.next=7,mt({companyId:d,assetId:n,yearId:a});case 7:200===(o=e.sent).status&&r.show(F({severity:"success",detail:o.data})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),_(e.t0,r);case 14:return e.prev=14,E(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[4,11,14,17]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",{style:{height:300}},n.a.createElement("form",{className:"p-d-flex p-flex-column p-jc-between",onSubmit:l(w)},n.a.createElement("div",{style:{marginBottom:10}},n.a.createElement(ge,{Controller:g.a,control:i,errors:c,controllerName:"yearId",label:"Year",required:!0,dropdownOptions:t,errorMessage:"Year is required",labelWidth:120,className:"p-d-flex p-ai-center"})),n.a.createElement("div",{style:{marginBottom:10}},n.a.createElement(ge,{Controller:g.a,control:i,errors:c,controllerName:"assetId",label:"Asset",required:!0,dropdownOptions:a,errorMessage:"Asset is required",labelWidth:120,className:"p-d-flex p-ai-center"})),n.a.createElement("div",{className:"p-d-flex p-flex-column",style:{marginTop:10}},n.a.createElement(u.Button,{type:"submit",label:y?null:"Submit",icon:y?"pi pi-spin pi-spinner":null,style:{width:320}}))))},vt=function(){var e=i.modules.investmentAllowance,t=n.a.useRef(),a=Object(l.h)(Ne),r=a.data,o=a.error,c=a.refresh,u=X(),m=Object(s.a)(u,2),d=m[0],p=m[1].onFixedAssetModuleItems,f=n.a.useState([]),h=Object(s.a)(f,2),v=h[0],b=h[1],g=Object(l.g)("mode"),E=Object(s.a)(g,2),w=E[0],x=E[1],C=n.a.useState(D()),O=Object(s.a)(C,2),S=O[0],N=O[1],j=M((function(e){return{label:e.toString(),value:e.toString()}}));return n.a.useEffect((function(){r&&p(r)}),[r,p]),n.a.useEffect((function(){d.fixedAssetModuleItems&&b(d.fixedAssetModuleItems.map((function(e){var t=e.id;return{label:e.name,value:t}})))}),[d.fixedAssetModuleItems]),o?n.a.createElement(ke,{title:e,error:o,refresh:c}):d.fixedAssetModuleItems?n.a.createElement(se,{title:e},n.a.createElement(ye,{title:e,mode:w,setMode:x,year:S,setYear:N,yearSelectItems:j},{mapping:n.a.createElement(ht,{yearSelectItems:j,assetClassSelectItems:v,toast:t.current}),view:n.a.createElement(ie,{title:e,year:S},n.a.createElement(ft,{year:S,toast:t.current}))}[w]),n.a.createElement(y.Toast,{baseZIndex:1e3,ref:function(e){return t.current=e}})):n.a.createElement(Ie,{title:e})},bt=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.companyId,r=t.year,e.prev=1,e.next=4,C.a.get("/api/ITLevy/".concat(a,"/").concat(r));case 4:return n=e.sent,o=n.data,e.abrupt("return",o);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),yt=function(e){var t=e.year,a=n.a.useRef(!1),r=p(),o=Object(s.a)(r,1)[0].companyId,c=n.a.useState(),l=Object(s.a)(c,2),i=l[0],u=l[1],m=n.a.useState(),d=Object(s.a)(m,2),f=d[0],b=d[1],y=n.a.useState([]),g=Object(s.a)(y,2),E=g[0],w=g[1];return n.a.useEffect((function(){if(o)return a.current=!0,function(){var e=Object(v.a)(h.a.mark((function e(){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(null),u(!0),e.next=5,bt({companyId:o,year:t});case 5:r=e.sent,a.current&&w((function(){return[].concat([{category:"Profit Before Taxation",credit:q(r.profitBeforeTaxation)},{category:"I.T. Levy @ 1% Thereon",credit:q(r.itLevyAt1PercentThereIn)}])})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a.current&&(e.t0.response?b(e.t0.response.data.errors[0]):b(e.t0.message));case 12:return e.prev=12,a.current&&u(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(){return e.apply(this,arguments)}}()(),function(){return a.current=!1}}),[o,t]),f?n.a.createElement("p",{style:{color:"#f00"}},f):i?n.a.createElement(re,null):n.a.createElement(ue.DataTable,{className:"p-datatable-gridlines",value:E,style:{marginTop:40}},n.a.createElement(me.Column,{field:"category",header:""}),n.a.createElement(me.Column,{field:"credit",header:"\u20a6"}))},gt=function(){var e=i.modules.itLevy,t=Object(l.g)("mode"),a=Object(s.a)(t,2),r=a[0],o=a[1],c=n.a.useState(D()),u=Object(s.a)(c,2),m=u[0],d=u[1],p=M((function(e){return{label:e.toString(),value:e.toString()}}));return n.a.createElement(se,{title:e},n.a.createElement(ye,{title:e,mode:r,setMode:o,year:m,setYear:d,yearSelectItems:p},n.a.createElement(ie,{title:e,year:m},n.a.createElement(yt,{year:m}))))},Et=function(){var e=Object(l.i)(),t=Object(s.a)(e,1)[0],a=Object(g.b)(),r=a.errors,o=a.handleSubmit,c=a.control,m=I(),d=Object(s.a)(m,2),p=d[0].isAuthenticated,f=d[1].onLoginSuccess,x=Object(l.j)().push,C=n.a.useState(!1),S=Object(s.a)(C,2),N=S[0],j=S[1],A=n.a.useRef();n.a.useEffect((function(){t.location.state&&A.current.show(F({severity:"success",detail:t.location.state}))}),[t]);var k=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o,c,s,l,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N){e.next=2;break}return e.abrupt("return");case 2:return j(!0),a=t.email,r=t.password,e.prev=4,e.next=7,O({email:a,password:r});case 7:n=e.sent,o=n.token,c=n.user,s=c.id,l=c.firstName,u=c.lastName,f({id:s,token:o,email:a,firstName:l,lastName:u}),x(i.routes.dashboard),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),j(!1),e.t0.response?e.t0.response.data.errors.map((function(e){return A.current.show(F({severity:"error",summary:"Login Error",detail:e}))})):A.current.show(F({severity:"error",summary:"Network Error",detail:i.networkErrorMessage}));case 21:case"end":return e.stop()}}),e,null,[[4,17]])})));return function(t){return e.apply(this,arguments)}}();if(p){var T=sessionStorage.getItem("path")||i.routes.dashboard;return sessionStorage.removeItem("path"),n.a.createElement(l.b,{to:T})}return n.a.createElement("div",{className:"p-d-flex p-jc-center p-ai-center",style:{height:"100vh"}},n.a.createElement(b.Card,{header:n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{className:"p-text-center accent-color"},"Tax Computation"),n.a.createElement("div",{className:"divider"})),style:{width:320}},n.a.createElement("form",{className:"p-d-flex p-flex-column",onSubmit:o(k)},n.a.createElement("div",{style:{marginBottom:15}},n.a.createElement(g.a,{name:"email",control:c,rules:{required:!0},defaultValue:"",render:function(e){return n.a.createElement(E.InputText,{style:{marginBottom:5,width:"100%"},placeholder:"Email",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}}),r.email&&n.a.createElement("span",{style:{fontSize:12,color:"red"}},"Email is required")),n.a.createElement("div",{style:{marginBottom:15}},n.a.createElement(g.a,{name:"password",control:c,rules:{required:!0},defaultValue:"",render:function(e){return n.a.createElement(w,{placeholder:"Password",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}}),r.password&&n.a.createElement("span",{style:{fontSize:12,color:"red"}},"Password is required")),n.a.createElement(u.Button,{type:"submit",label:N?null:"Login",icon:N?"pi pi-spin pi-spinner":null,style:{width:"100%"}})),n.a.createElement(l.a,{href:i.routes.forgot_password,className:"auth-link"},n.a.createElement("p",{style:{marginBottom:0,marginTop:20,fontSize:14}},"Forgot Password"))),n.a.createElement(y.Toast,{ref:function(e){return A.current=e}}))},wt=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.companyId,r=t.year,e.prev=1,e.next=4,C.a.get("/api/MinimumTax/".concat(a,"/").concat(r));case 4:return n=e.sent,o=n.data,e.abrupt("return",o);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),xt=function(e){var t=e.year,a=n.a.useRef(!1),r=p(),o=Object(s.a)(r,1)[0].companyId,c=n.a.useState(),l=Object(s.a)(c,2),i=l[0],u=l[1],m=n.a.useState(),d=Object(s.a)(m,2),f=d[0],b=d[1],y=n.a.useState([]),g=Object(s.a)(y,2),E=g[0],w=g[1];return n.a.useEffect((function(){if(o)return a.current=!0,function(){var e=Object(v.a)(h.a.mark((function e(){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(null),u(!0),e.next=5,wt({companyId:o,year:t});case 5:r=e.sent,a.current&&w((function(){return[].concat([{category:"0.5% OF TURNOVER",credit:q(r.fivePercentTurnOver)},{category:"Dividend Income",credit:r.dividend?q(r.dividend):null},{category:n.a.createElement("strong",null,"Minimum Tax Payable"),credit:q(r.turnOver)}])})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a.current&&(e.t0.response?b(e.t0.response.data.errors[0]):b(e.t0.message));case 12:return e.prev=12,a.current&&u(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(){return e.apply(this,arguments)}}()(),function(){return a.current=!1}}),[o,t]),f?n.a.createElement("p",{style:{color:"#f00"}},f):i?n.a.createElement(re,null):n.a.createElement(ue.DataTable,{className:"p-datatable-gridlines",value:E,style:{marginTop:40}},n.a.createElement(me.Column,{field:"category",header:""}),n.a.createElement(me.Column,{field:"credit",header:"\u20a6"}))},Ct=function(){var e=i.modules.minimumTax,t=Object(l.g)("mode"),a=Object(s.a)(t,2),r=a[0],o=a[1],c=n.a.useState(D()),u=Object(s.a)(c,2),m=u[0],d=u[1],p=M((function(e){return{label:e.toString(),value:e.toString()}}));return n.a.createElement(se,{title:e},n.a.createElement(ye,{title:e,mode:r,setMode:o,year:m,setYear:d,yearSelectItems:p},n.a.createElement(ie,{title:e,year:m},n.a.createElement(xt,{year:m}))))},Ot=function(){return n.a.createElement(se,{title:""},n.a.createElement(b.Card,{style:{width:"100%"}},n.a.createElement("h1",{style:{margin:0}},"404 - Not Found"),n.a.createElement("p",null,"Sorry the page you are looking for doesn't exist.")))},St=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.profitAndLossId,r=t.trialBalanceList,n=t.companyId,o=t.yearId,c=t.mappedCode,e.prev=1,e.next=4,C.a.post("/api/ProfitAndLoss",{profitAndLossId:a,trialBalanceList:r,companyId:n,yearId:o,mappedCode:c});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),Nt=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.companyId,r=t.year,e.prev=1,e.next=4,C.a.get("/api/ProfitAndLoss/".concat(a,"/").concat(r));case 4:return n=e.sent,o=n.data,e.abrupt("return",o);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),jt=function(e){var t=e.year,a=n.a.useRef(!1),r=p(),o=Object(s.a)(r,1)[0].companyId,c=n.a.useState(),l=Object(s.a)(c,2),i=l[0],u=l[1],m=n.a.useState(),d=Object(s.a)(m,2),f=d[0],b=d[1],y=n.a.useState([]),g=Object(s.a)(y,2),E=g[0],w=g[1];return n.a.useEffect((function(){if(o)return a.current=!0,function(){var e=Object(v.a)(h.a.mark((function e(){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(null),u(!0),e.next=5,Nt({companyId:o,year:t});case 5:r=e.sent,a.current&&w(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a.current&&(e.t0.response?b(e.t0.response.data.errors[0]):b(e.t0.message));case 12:return e.prev=12,a.current&&u(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(){return e.apply(this,arguments)}}()(),function(){return a.current=!1}}),[o,t]),f?n.a.createElement("p",{style:{color:"#f00"}},f):i?n.a.createElement(re,null):n.a.createElement(ue.DataTable,{className:"p-datatable-gridlines",value:E,style:{marginTop:40}},n.a.createElement(me.Column,{field:"category",header:""}),n.a.createElement(me.Column,{field:"total",header:"Total"}))},At=function(e){var t=e.year,a=e.setYear,r=e.yearSelectItems,o=e.assetClassSelectItems,c=e.tbData,l=e.trialBalanceRefresh,m=e.toast,d=Object(g.b)(),f=d.errors,b=d.handleSubmit,y=d.control,E=p(),w=Object(s.a)(E,1)[0].companyId,x=n.a.useState(!1),C=Object(s.a)(x,2),O=C[0],S=C[1],N=n.a.useState([]),j=Object(s.a)(N,2),A=j[0],I=j[1],k=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=2;break}return e.abrupt("return");case 2:if(a=t.profitAndLossId,r=t.yearId,0!==A.length){e.next=6;break}return m.show(F({severity:"error",detail:"Select at least one account from the trial balance table"})),e.abrupt("return");case 6:return S(!0),e.prev=7,e.next=10,St({profitAndLossId:a,trialBalanceList:A,companyId:w,yearId:r,mappedCode:"profitandloss"});case 10:200===e.sent.status&&m.show(F({severity:"success",detail:"Profit and Loss mapped successfully"})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),_(e.t0,m);case 17:return e.prev=17,S(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[7,14,17,20]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{className:"p-d-flex p-jc-between",onSubmit:b(k)},n.a.createElement(ge,{Controller:g.a,control:y,errors:f,controllerName:"profitAndLossId",label:"Profit and Loss Item",placeholder:"Select Item",width:250,required:!0,dropdownOptions:o,errorMessage:"Profit and Loss Item is required"}),n.a.createElement(ge,{Controller:g.a,control:y,errors:f,controllerName:"yearId",label:"Year",width:250,required:!0,dropdownOptions:r,onChangeCallback:a,errorMessage:"Year is required",defaultValue:t}),n.a.createElement("div",null,n.a.createElement("p",{style:{color:"transparent",marginTop:0,marginBottom:5}},"Submit"),n.a.createElement(u.Button,{type:"submit",label:O?null:"Submit",icon:O?"pi pi-spin pi-spinner":null,style:{width:250}}))),n.a.createElement(Qe,{title:i.modules.profit_loss,tbData:c,trialBalanceRefresh:l,toast:m,selectedAccounts:A,setSelectedAccounts:I}))},It=function(){var e=i.modules.profit_loss,t=n.a.useRef(),a=Object(l.h)(je),r=a.data,o=a.error,c=a.refresh,u=Object(l.h)(Ae),m=u.data,d=u.error,p=u.refresh,f=n.a.useState([]),h=Object(s.a)(f,2),v=h[0],b=h[1],g=Object(l.g)("mode"),E=Object(s.a)(g,2),w=E[0],x=E[1],C=n.a.useState(D()),O=Object(s.a)(C,2),S=O[0],N=O[1],j=n.a.useState([]),A=Object(s.a)(j,2),I=A[0],k=A[1],T=X(),B=Object(s.a)(T,2),R=B[0],L=B[1],P=L.onTrialBalance,q=L.onProfitAndLossModuleItems,F=M((function(e){return{label:e.toString(),value:e.toString()}}));return n.a.useEffect((function(){r&&q(r)}),[r,q]),n.a.useEffect((function(){R.profitAndLossModuleItems&&k(R.profitAndLossModuleItems.map((function(e){var t=e.id;return{label:e.name,value:t}})))}),[R.profitAndLossModuleItems]),n.a.useEffect((function(){m&&P(m)}),[P,m]),n.a.useEffect((function(){Y(R,b)}),[R]),o?n.a.createElement(ke,{title:e,error:o,refresh:c}):d?n.a.createElement(ke,{title:e,error:d,refresh:p}):R.profitAndLossModuleItems&&R.trialBalance?n.a.createElement(se,{title:e},n.a.createElement(ye,{title:e,mode:w,setMode:x,year:S,setYear:N,yearSelectItems:F},{mapping:n.a.createElement(At,{year:S,setYear:N,yearSelectItems:F,assetClassSelectItems:I,tbData:v,trialBalanceRefresh:p,toast:t.current}),view:n.a.createElement(ie,{title:e,year:S},n.a.createElement(jt,{year:S}))}[w]),n.a.createElement(y.Toast,{baseZIndex:1e3,ref:function(e){return t.current=e}})):n.a.createElement(Ie,{title:e})},kt=function(){var e=Object(l.i)(),t=Object(s.a)(e,1)[0],a=Object(g.b)(),r=a.errors,o=a.handleSubmit,c=a.control,m=I(),d=Object(s.a)(m,1)[0].isAuthenticated,p=Object(l.j)().push,f=n.a.useState(!1),x=Object(s.a)(f,2),C=x[0],O=x[1],S=n.a.useRef();n.a.useEffect((function(){t.location.state&&S.current.show(F({severity:"success",detail:t.location.state}))}),[t]);var j=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,r,n,o,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=2;break}return e.abrupt("return");case 2:return O(!0),a=t.token,r=t.newPassword,e.prev=4,e.next=7,N({token:a,newPassword:r});case 7:n=e.sent,o=n.message,p({pathname:i.routes.login,state:o}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),O(!1),e.t0.response?(c=e.t0.response.data.message,S.current.show(F({severity:"error",summary:"Error",detail:c}))):S.current.show(F({severity:"error",summary:"Network Error",detail:i.networkErrorMessage}));case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}();if(d){var A=sessionStorage.getItem("path")||i.routes.dashboard;return sessionStorage.removeItem("path"),n.a.createElement(l.b,{to:A})}return n.a.createElement("div",{className:"p-d-flex p-jc-center p-ai-center",style:{height:"100vh"}},n.a.createElement(b.Card,{header:n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{className:"p-text-center accent-color"},"Tax Computation"),n.a.createElement("div",{className:"divider"})),style:{width:320}},n.a.createElement("form",{className:"p-d-flex p-flex-column",onSubmit:o(j)},n.a.createElement("div",{style:{marginBottom:15}},n.a.createElement(g.a,{name:"token",control:c,rules:{required:!0},defaultValue:"",render:function(e){return n.a.createElement(E.InputText,{style:{marginBottom:5,width:"100%"},placeholder:"Token",maxLength:4,keyfilter:"pint",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}}),r.token&&n.a.createElement("span",{style:{fontSize:12,color:"red"}},"Token is required")),n.a.createElement("div",{style:{marginBottom:15}},n.a.createElement(g.a,{name:"newPassword",control:c,rules:{required:!0},defaultValue:"",render:function(e){return n.a.createElement(w,{placeholder:"New Password",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}}),r.newPassword&&n.a.createElement("span",{style:{fontSize:12,color:"red"}},"New Password is required")),n.a.createElement(u.Button,{type:"submit",label:C?null:"Reset Password",icon:C?"pi pi-spin pi-spinner":null,style:{width:"100%"}})),n.a.createElement(l.a,{href:i.routes.login,className:"auth-link"},n.a.createElement("p",{style:{marginBottom:0,marginTop:20,fontSize:14}},"Back to login"))),n.a.createElement(y.Toast,{ref:function(e){return S.current=e}}))},Tt=function(e){return function(t){var a=I(),r=Object(s.a)(a,1)[0].isAuthenticated,o=Object(l.i)(),c=Object(s.a)(o,2),u=c[0],m=c[1].replace;return n.a.useEffect((function(){null===r||r||m({pathname:i.routes.login,state:u.location.state})}),[r,m,u]),n.a.createElement(n.a.Fragment,null,r&&n.a.createElement(e,t))}},Bt=[{path:i.routes.home,name:"HOME",exact:!0,component:nt},{path:i.routes.login,name:"LOGIN",exact:!0,component:Et},{path:i.routes.forgot_password,name:"FORGOT_PASSWORD",exact:!0,component:rt},{path:i.routes.reset_password,name:"RESET_PASSWORD",exact:!0,component:kt},{path:i.routes.dashboard,name:"DASHBOARD",exact:!0,component:Tt(Ue),resources:[Se]},{path:"".concat(i.routes.fixed_asset).concat("/:mode"),name:"FIXED_ASSET",exact:!0,component:Tt(at),resources:[Ne,Ae]},{path:"".concat(i.routes.profit_loss).concat("/:mode"),name:"PROFIT_LOSS",exact:!0,component:Tt(It),resources:[je,Ae]},{path:"".concat(i.routes.income_tax).concat("/:mode"),name:"INCOME_TAX",exact:!0,component:Tt(ut),resources:[Ae]},{path:"".concat(i.routes.deferred_tax).concat("/:mode"),name:"DEFERRED_TAX",exact:!0,component:Tt(Xe)},{path:"".concat(i.routes.minimum_tax).concat("/:mode"),name:"MINIMUM_TAX",exact:!0,component:Tt(Ct)},{path:"".concat(i.routes.it_levy).concat("/:mode"),name:"IT_LEVY",exact:!0,component:Tt(gt)},{path:"".concat(i.routes.capital_allowance).concat("/:mode"),name:"CAPITAL_ALLOWANCE",exact:!0,component:Tt(Fe),resources:[Ne]},{path:"".concat(i.routes.investment_allowance).concat("/:mode"),name:"INVESTMENT_ALLOWANCE",exact:!0,component:Tt(vt),resources:[Ne]},{path:"".concat(i.routes.balancing_adjustment).concat("/:mode"),name:"BALANCING_ADJUSTMENT",exact:!0,component:Tt(Te),resources:[Ne]},{path:"*",name:"NOT_FOUND",component:Ot}],Dt=Object(l.e)();var Mt=function(){var e,t=I(),a=Object(s.a)(t,2),r=a[0],o=a[1].initAuth,c=p(),i=Object(s.a)(c,2),u=i[0],m=i[1].initCompany;return window.onbeforeunload=function(){L(r,"auth"),L(u,"company"),sessionStorage.setItem("path",Dt.location.pathname),sessionStorage.setItem("token",r.token)},window.onload=function(){o(P("auth")),m(P("company")),sessionStorage.removeItem("token")},e=r.token,C.a.defaults.baseURL=window.configs.baseURL,C.a.interceptors.request.use((function(t){var a=e||sessionStorage.getItem("token");return a&&(t.headers.Authorization="Bearer ".concat(a)),t}),(function(e){Promise.reject(e)})),n.a.createElement(l.d,{history:Dt,routes:Bt},n.a.createElement(l.c,null))},Rt=a(74),Lt=a(75),Pt=a(77),qt=a(76),Ft=function(e){Object(Pt.a)(a,e);var t=Object(qt.a)(a);function a(e){var r;return Object(Rt.a)(this,a),(r=t.call(this,e)).state={hasError:!1,offline:!1},r}return Object(Lt.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("online",(function(){return e.setState(Object(k.a)(Object(k.a)({},e.state),{},{offline:!1}))})),window.addEventListener("offline",(function(){return e.setState(Object(k.a)(Object(k.a)({},e.state),{},{offline:!0}))}))}},{key:"componentDidCatch",value:function(e,t){!function(e,t){console.log(e,t)}(e,t)}},{key:"render",value:function(){return this.state.hasError?n.a.createElement("div",{className:"error-boundary"},n.a.createElement("h2",{style:{marginBottom:0}},"An Error Occurred"),n.a.createElement("p",{style:{margin:0}},"contact your admin for ",n.a.createElement("em",null,"error logs"))):n.a.createElement("div",{className:"app"},n.a.createElement("div",{className:"app-container"},this.props.children),this.state.offline&&n.a.createElement("div",{style:{position:"fixed",zIndex:1e3,left:0,right:0,top:0,bottom:0,background:"rgba(255, 255, 255, 0.95)"}},n.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100vw",height:"100vh"}},n.a.createElement("p",{style:{fontSize:20,paddingTop:20,textAlign:"center"}},"No internet!",n.a.createElement("br",null),"Reconnect to keep working"))))}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),a}(r.Component);m.g.devtools=!0,c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(Ft,null,n.a.createElement(Mt,null))),document.getElementById("root"))},79:function(e,t,a){e.exports=a(151)},85:function(e,t,a){}},[[79,1,2]]]);
//# sourceMappingURL=main.4f86139e.chunk.js.map